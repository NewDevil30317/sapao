(function(){ try {var elementStyle = document.createElement('style'); elementStyle.appendChild(document.createTextNode(".kw-form-select-kiwi{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%23a0aec0' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E\");background-position:right 8px center;background-repeat:no-repeat;background-size:1.5em 1.5em;-webkit-print-color-adjust:exact;color-adjust:exact;print-color-adjust:exact;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-color:#a0aec0;border-radius:0;padding:8px 12px;font-size:1}.kw-form-select-kiwi:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-inset: var(--tw-empty, );--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: #3182ce;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 transparent);border-color:#3182ce}*,:before,:after{--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.kw-fixed{position:fixed}.kw-absolute{position:absolute}.kw-relative{position:relative}.kw-inset-0{top:0px;right:0px;bottom:0px;left:0px}.kw-left-0{left:0px}.kw-top-0{top:0px}.kw-z-\\[1000000\\]{z-index:1000000}.kw-z-50{z-index:50}.kw-m-4{margin:16px}.kw-mx-auto{margin-left:auto;margin-right:auto}.kw-my-4{margin-top:16px;margin-bottom:16px}.-kw-ml-1{margin-left:-4px}.kw-mr-3{margin-right:12px}.kw-mt-3{margin-top:12px}.kw-ml-3{margin-left:12px}.kw-mt-0{margin-top:0}.kw-mb-4{margin-bottom:16px}.kw-mt-8{margin-top:32px}.kw-mt-2{margin-top:8px}.kw-mr-1{margin-right:4px}.kw-mt-4{margin-top:16px}.kw-block{display:block}.kw-inline-block{display:inline-block}.kw-flex{display:flex}.kw-inline-flex{display:inline-flex}.kw-hidden{display:none}.kw-h-20{height:80px}.kw-h-5{height:20px}.kw-h-full{height:100%}.kw-h-16{height:64px}.kw-h-6{height:24px}.kw-min-h-screen{min-height:100vh}.kw-w-full{width:100%}.kw-w-auto{width:auto}.kw-w-8\\/12{width:66.666667%}.kw-w-16{width:64px}.kw-w-6{width:24px}.kw-min-w-\\[174px\\]{min-width:174px}.kw-min-w-\\[200px\\]{min-width:200px}.kw-max-w-\\[400px\\]{max-width:400px}.kw-flex-1{flex:1 1 0%}.kw-transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes kw-spin{to{transform:rotate(360deg)}}.kw-animate-spin{animation:kw-spin 1s linear infinite}.kw-cursor-pointer{cursor:pointer}.kw-flex-row{flex-direction:row}.kw-flex-row-reverse{flex-direction:row-reverse}.kw-flex-col{flex-direction:column}.kw-items-end{align-items:flex-end}.kw-items-center{align-items:center}.kw-justify-end{justify-content:flex-end}.kw-justify-center{justify-content:center}.kw-justify-between{justify-content:space-between}.kw-overflow-hidden{overflow:hidden}.kw-overflow-y-auto{overflow-y:auto}.kw-rounded-md{border-radius:6px}.kw-rounded-lg{border-radius:8px}.kw-rounded{border-radius:4px}.kw-border{border-width:1px}.kw-border-solid{border-style:solid}.kw-border-\\[\\#a0aec0\\]{--tw-border-opacity: 1;border-color:rgb(160 174 192 / var(--tw-border-opacity))}.kw-border-transparent{border-color:transparent}.kw-border-gray-100{--tw-border-opacity: 1;border-color:rgb(243 244 246 / var(--tw-border-opacity))}.kw-border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity))}.kw-bg-gray-500{--tw-bg-opacity: 1;background-color:rgb(107 114 128 / var(--tw-bg-opacity))}.kw-bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.kw-bg-indigo-600{--tw-bg-opacity: 1;background-color:rgb(79 70 229 / var(--tw-bg-opacity))}.kw-bg-black{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity))}.kw-bg-gray-800{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity))}.kw-bg-\\[\\#edf2f7\\]{--tw-bg-opacity: 1;background-color:rgb(237 242 247 / var(--tw-bg-opacity))}.kw-bg-opacity-25{--tw-bg-opacity: .25 }.kw-p-10{padding:40px}.kw-p-6{padding:24px}.kw-p-3{padding:12px}.kw-p-4{padding:16px}.kw-p-2{padding:8px}.kw-px-4{padding-left:16px;padding-right:16px}.kw-py-2{padding-top:8px;padding-bottom:8px}.kw-px-3{padding-left:12px;padding-right:12px}.kw-py-3{padding-top:12px;padding-bottom:12px}.kw-px-6{padding-left:24px;padding-right:24px}.kw-py-8{padding-top:32px;padding-bottom:32px}.kw-py-6{padding-top:24px;padding-bottom:24px}.kw-pt-4{padding-top:16px}.kw-pb-20{padding-bottom:80px}.kw-pl-3{padding-left:12px}.kw-pr-10{padding-right:40px}.kw-text-left{text-align:left}.kw-text-center{text-align:center}.kw-text-right{text-align:right}.kw-align-middle{vertical-align:middle}.kw-font-sans{font-family:Open Sans,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",Segoe UI Symbol,\"Noto Color Emoji\"}.kw-text-lg{font-size:18px;line-height:28px}.kw-text-sm{font-size:14px;line-height:20px}.kw-text-base{font-size:16px;line-height:24px}.kw-text-2xl{font-size:24px;line-height:32px}.kw-text-xl{font-size:20px;line-height:28px}.kw-font-bold{font-weight:700}.kw-font-medium{font-weight:500}.kw-uppercase{text-transform:uppercase}.kw-leading-6{line-height:24px}.kw-leading-none{line-height:1}.kw-text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.kw-text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity))}.kw-text-\\[\\#a0aec0\\]{--tw-text-opacity: 1;color:rgb(160 174 192 / var(--tw-text-opacity))}.kw-text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity))}.kw-text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity))}.kw-text-\\[\\#38a169\\]{--tw-text-opacity: 1;color:rgb(56 161 105 / var(--tw-text-opacity))}.kw-text-green-500{--tw-text-opacity: 1;color:rgb(34 197 94 / var(--tw-text-opacity))}.kw-text-\\[\\#ed8936\\]{--tw-text-opacity: 1;color:rgb(237 137 54 / var(--tw-text-opacity))}.kw-text-\\[\\#2b6cb0\\]{--tw-text-opacity: 1;color:rgb(43 108 176 / var(--tw-text-opacity))}.kw-underline{-webkit-text-decoration-line:underline;text-decoration-line:underline}.kw-opacity-75{opacity:.75}.kw-opacity-25{opacity:.25}.kw-opacity-50{opacity:.5}.kw-shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.kw-shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.kw-shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.kw-shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.kw-shadow-inner{--tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / .05);--tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.kw-transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.kw-transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}#kiwify-upsell-container{font-family:Open Sans,sans-serif!important;line-height:1.5!important;-webkit-font-smoothing:antialiased!important}html.is-locked,body.is-locked{height:calc(var(--window-inner-height) - 1px);overflow:hidden;box-sizing:border-box}.kw-form-container-kiwi-pix{height:90vh!important}@media only screen and (min-height: 768px){.kw-form-container-kiwi-pix{height:auto!important}}@media only screen and (max-width: 600px){.kw-form-container-kiwi-pix{height:calc(100vh - 140px)!important}@supports (-webkit-touch-callout: none){.kw-form-container-kiwi-pix{height:calc(calc(var(--window-vh, 1vh) * 100) - 140px)!important}}}.hover\\:kw-bg-indigo-700:hover{--tw-bg-opacity: 1;background-color:rgb(67 56 202 / var(--tw-bg-opacity))}.hover\\:kw-no-underline:hover{-webkit-text-decoration-line:none;text-decoration-line:none}.focus\\:kw-outline-none:focus{outline:2px solid transparent;outline-offset:2px}@media (min-width: 640px){.sm\\:kw-block{display:block}.sm\\:kw-inline-block{display:inline-block}.sm\\:kw-h-screen{height:100vh}.sm\\:kw-max-w-\\[600px\\]{max-width:600px}.sm\\:kw-rounded-lg{border-radius:8px}.sm\\:kw-p-0{padding:0}.sm\\:kw-align-middle{vertical-align:middle}}@media (min-width: 768px){.md\\:kw-mt-0{margin-top:0}.md\\:kw-block{display:block}.md\\:kw-hidden{display:none}}")); document.head.appendChild(elementStyle);} catch(e) {console.error('vite-plugin-css-injected-by-js', e);} })();var Wo=Object.defineProperty,Qo=Object.defineProperties;var Yo=Object.getOwnPropertyDescriptors;var hn=Object.getOwnPropertySymbols;var Ko=Object.prototype.hasOwnProperty,Go=Object.prototype.propertyIsEnumerable;var yt=(i,o,s)=>o in i?Wo(i,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[o]=s,$e=(i,o)=>{for(var s in o||(o={}))Ko.call(o,s)&&yt(i,s,o[s]);if(hn)for(var s of hn(o))Go.call(o,s)&&yt(i,s,o[s]);return i},dn=(i,o)=>Qo(i,Yo(o));var q=(i,o,s)=>(yt(i,typeof o!="symbol"?o+"":o,s),s);const Zo=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))u(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&u(f)}).observe(document,{childList:!0,subtree:!0});function s(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerpolicy&&(a.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?a.credentials="include":l.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function u(l){if(l.ep)return;l.ep=!0;const a=s(l);fetch(l.href,a)}};Zo();var Ze,I,Sn,Re,xn,pn,We={},Tn=[],es=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function ce(i,o){for(var s in o)i[s]=o[s];return i}function En(i){var o=i.parentNode;o&&o.removeChild(i)}function ts(i,o,s){var u,l,a,f={};for(a in o)a=="key"?u=o[a]:a=="ref"?l=o[a]:f[a]=o[a];if(arguments.length>2&&(f.children=arguments.length>3?Ze.call(arguments,2):s),typeof i=="function"&&i.defaultProps!=null)for(a in i.defaultProps)f[a]===void 0&&(f[a]=i.defaultProps[a]);return Xe(i,f,u,l,null)}function Xe(i,o,s,u,l){var a={type:i,props:o,key:s,ref:u,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:l==null?++Sn:l};return l==null&&I.vnode!=null&&I.vnode(a),a}function le(i){return i.children}function Y(i,o){this.props=i,this.context=o}function be(i,o){if(o==null)return i.__?be(i.__,i.__.__k.indexOf(i)+1):null;for(var s;o<i.__k.length;o++)if((s=i.__k[o])!=null&&s.__e!=null)return s.__e;return typeof i.type=="function"?be(i):null}function Pn(i){var o,s;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,o=0;o<i.__k.length;o++)if((s=i.__k[o])!=null&&s.__e!=null){i.__e=i.__c.base=s.__e;break}return Pn(i)}}function mn(i){(!i.__d&&(i.__d=!0)&&Re.push(i)&&!Qe.__r++||pn!==I.debounceRendering)&&((pn=I.debounceRendering)||xn)(Qe)}function Qe(){for(var i;Qe.__r=Re.length;)i=Re.sort(function(o,s){return o.__v.__b-s.__v.__b}),Re=[],i.some(function(o){var s,u,l,a,f,p;o.__d&&(f=(a=(s=o).__v).__e,(p=s.__P)&&(u=[],(l=ce({},a)).__v=a.__v+1,Et(p,a,l,s.__n,p.ownerSVGElement!==void 0,a.__h!=null?[f]:null,u,f==null?be(a):f,a.__h),On(u,a),a.__e!=f&&Pn(a)))})}function An(i,o,s,u,l,a,f,p,d,C){var g,P,m,y,b,N,w,v=u&&u.__k||Tn,S=v.length;for(s.__k=[],g=0;g<o.length;g++)if((y=s.__k[g]=(y=o[g])==null||typeof y=="boolean"?null:typeof y=="string"||typeof y=="number"||typeof y=="bigint"?Xe(null,y,null,null,y):Array.isArray(y)?Xe(le,{children:y},null,null,null):y.__b>0?Xe(y.type,y.props,y.key,null,y.__v):y)!=null){if(y.__=s,y.__b=s.__b+1,(m=v[g])===null||m&&y.key==m.key&&y.type===m.type)v[g]=void 0;else for(P=0;P<S;P++){if((m=v[P])&&y.key==m.key&&y.type===m.type){v[P]=void 0;break}m=null}Et(i,y,m=m||We,l,a,f,p,d,C),b=y.__e,(P=y.ref)&&m.ref!=P&&(w||(w=[]),m.ref&&w.push(m.ref,null,y),w.push(P,y.__c||b,y)),b!=null?(N==null&&(N=b),typeof y.type=="function"&&y.__k===m.__k?y.__d=d=Ln(y,d,i):d=Rn(i,y,m,v,b,d),typeof s.type=="function"&&(s.__d=d)):d&&m.__e==d&&d.parentNode!=i&&(d=be(m))}for(s.__e=N,g=S;g--;)v[g]!=null&&(typeof s.type=="function"&&v[g].__e!=null&&v[g].__e==s.__d&&(s.__d=be(u,g+1)),Mn(v[g],v[g]));if(w)for(g=0;g<w.length;g++)In(w[g],w[++g],w[++g])}function Ln(i,o,s){for(var u,l=i.__k,a=0;l&&a<l.length;a++)(u=l[a])&&(u.__=i,o=typeof u.type=="function"?Ln(u,o,s):Rn(s,u,u,l,u.__e,o));return o}function Rn(i,o,s,u,l,a){var f,p,d;if(o.__d!==void 0)f=o.__d,o.__d=void 0;else if(s==null||l!=a||l.parentNode==null)e:if(a==null||a.parentNode!==i)i.appendChild(l),f=null;else{for(p=a,d=0;(p=p.nextSibling)&&d<u.length;d+=2)if(p==l)break e;i.insertBefore(l,a),f=a}return f!==void 0?f:l.nextSibling}function ns(i,o,s,u,l){var a;for(a in s)a==="children"||a==="key"||a in o||Ye(i,a,null,s[a],u);for(a in o)l&&typeof o[a]!="function"||a==="children"||a==="key"||a==="value"||a==="checked"||s[a]===o[a]||Ye(i,a,o[a],s[a],u)}function gn(i,o,s){o[0]==="-"?i.setProperty(o,s):i[o]=s==null?"":typeof s!="number"||es.test(o)?s:s+"px"}function Ye(i,o,s,u,l){var a;e:if(o==="style")if(typeof s=="string")i.style.cssText=s;else{if(typeof u=="string"&&(i.style.cssText=u=""),u)for(o in u)s&&o in s||gn(i.style,o,"");if(s)for(o in s)u&&s[o]===u[o]||gn(i.style,o,s[o])}else if(o[0]==="o"&&o[1]==="n")a=o!==(o=o.replace(/Capture$/,"")),o=o.toLowerCase()in i?o.toLowerCase().slice(2):o.slice(2),i.l||(i.l={}),i.l[o+a]=s,s?u||i.addEventListener(o,a?vn:yn,a):i.removeEventListener(o,a?vn:yn,a);else if(o!=="dangerouslySetInnerHTML"){if(l)o=o.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(o!=="href"&&o!=="list"&&o!=="form"&&o!=="tabIndex"&&o!=="download"&&o in i)try{i[o]=s==null?"":s;break e}catch{}typeof s=="function"||(s!=null&&(s!==!1||o[0]==="a"&&o[1]==="r")?i.setAttribute(o,s):i.removeAttribute(o))}}function yn(i){this.l[i.type+!1](I.event?I.event(i):i)}function vn(i){this.l[i.type+!0](I.event?I.event(i):i)}function Et(i,o,s,u,l,a,f,p,d){var C,g,P,m,y,b,N,w,v,S,T,E=o.type;if(o.constructor!==void 0)return null;s.__h!=null&&(d=s.__h,p=o.__e=s.__e,o.__h=null,a=[p]),(C=I.__b)&&C(o);try{e:if(typeof E=="function"){if(w=o.props,v=(C=E.contextType)&&u[C.__c],S=C?v?v.props.value:C.__:u,s.__c?N=(g=o.__c=s.__c).__=g.__E:("prototype"in E&&E.prototype.render?o.__c=g=new E(w,S):(o.__c=g=new Y(w,S),g.constructor=E,g.render=is),v&&v.sub(g),g.props=w,g.state||(g.state={}),g.context=S,g.__n=u,P=g.__d=!0,g.__h=[]),g.__s==null&&(g.__s=g.state),E.getDerivedStateFromProps!=null&&(g.__s==g.state&&(g.__s=ce({},g.__s)),ce(g.__s,E.getDerivedStateFromProps(w,g.__s))),m=g.props,y=g.state,P)E.getDerivedStateFromProps==null&&g.componentWillMount!=null&&g.componentWillMount(),g.componentDidMount!=null&&g.__h.push(g.componentDidMount);else{if(E.getDerivedStateFromProps==null&&w!==m&&g.componentWillReceiveProps!=null&&g.componentWillReceiveProps(w,S),!g.__e&&g.shouldComponentUpdate!=null&&g.shouldComponentUpdate(w,g.__s,S)===!1||o.__v===s.__v){g.props=w,g.state=g.__s,o.__v!==s.__v&&(g.__d=!1),g.__v=o,o.__e=s.__e,o.__k=s.__k,o.__k.forEach(function(O){O&&(O.__=o)}),g.__h.length&&f.push(g);break e}g.componentWillUpdate!=null&&g.componentWillUpdate(w,g.__s,S),g.componentDidUpdate!=null&&g.__h.push(function(){g.componentDidUpdate(m,y,b)})}g.context=S,g.props=w,g.state=g.__s,(C=I.__r)&&C(o),g.__d=!1,g.__v=o,g.__P=i,C=g.render(g.props,g.state,g.context),g.state=g.__s,g.getChildContext!=null&&(u=ce(ce({},u),g.getChildContext())),P||g.getSnapshotBeforeUpdate==null||(b=g.getSnapshotBeforeUpdate(m,y)),T=C!=null&&C.type===le&&C.key==null?C.props.children:C,An(i,Array.isArray(T)?T:[T],o,s,u,l,a,f,p,d),g.base=o.__e,o.__h=null,g.__h.length&&f.push(g),N&&(g.__E=g.__=null),g.__e=!1}else a==null&&o.__v===s.__v?(o.__k=s.__k,o.__e=s.__e):o.__e=rs(s.__e,o,s,u,l,a,f,d);(C=I.diffed)&&C(o)}catch(O){o.__v=null,(d||a!=null)&&(o.__e=p,o.__h=!!d,a[a.indexOf(p)]=null),I.__e(O,o,s)}}function On(i,o){I.__c&&I.__c(o,i),i.some(function(s){try{i=s.__h,s.__h=[],i.some(function(u){u.call(s)})}catch(u){I.__e(u,s.__v)}})}function rs(i,o,s,u,l,a,f,p){var d,C,g,P=s.props,m=o.props,y=o.type,b=0;if(y==="svg"&&(l=!0),a!=null){for(;b<a.length;b++)if((d=a[b])&&"setAttribute"in d==!!y&&(y?d.localName===y:d.nodeType===3)){i=d,a[b]=null;break}}if(i==null){if(y===null)return document.createTextNode(m);i=l?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,m.is&&m),a=null,p=!1}if(y===null)P===m||p&&i.data===m||(i.data=m);else{if(a=a&&Ze.call(i.childNodes),C=(P=s.props||We).dangerouslySetInnerHTML,g=m.dangerouslySetInnerHTML,!p){if(a!=null)for(P={},b=0;b<i.attributes.length;b++)P[i.attributes[b].name]=i.attributes[b].value;(g||C)&&(g&&(C&&g.__html==C.__html||g.__html===i.innerHTML)||(i.innerHTML=g&&g.__html||""))}if(ns(i,m,P,l,p),g)o.__k=[];else if(b=o.props.children,An(i,Array.isArray(b)?b:[b],o,s,u,l&&y!=="foreignObject",a,f,a?a[0]:s.__k&&be(s,0),p),a!=null)for(b=a.length;b--;)a[b]!=null&&En(a[b]);p||("value"in m&&(b=m.value)!==void 0&&(b!==i.value||y==="progress"&&!b||y==="option"&&b!==P.value)&&Ye(i,"value",b,P.value,!1),"checked"in m&&(b=m.checked)!==void 0&&b!==i.checked&&Ye(i,"checked",b,P.checked,!1))}return i}function In(i,o,s){try{typeof i=="function"?i(o):i.current=o}catch(u){I.__e(u,s)}}function Mn(i,o,s){var u,l;if(I.unmount&&I.unmount(i),(u=i.ref)&&(u.current&&u.current!==i.__e||In(u,null,o)),(u=i.__c)!=null){if(u.componentWillUnmount)try{u.componentWillUnmount()}catch(a){I.__e(a,o)}u.base=u.__P=null}if(u=i.__k)for(l=0;l<u.length;l++)u[l]&&Mn(u[l],o,typeof i.type!="function");s||i.__e==null||En(i.__e),i.__e=i.__d=void 0}function is(i,o,s){return this.constructor(i,s)}function os(i,o,s){var u,l,a;I.__&&I.__(i,o),l=(u=typeof s=="function")?null:s&&s.__k||o.__k,a=[],Et(o,i=(!u&&s||o).__k=ts(le,null,[i]),l||We,We,o.ownerSVGElement!==void 0,!u&&s?[s]:l?null:o.firstChild?Ze.call(o.childNodes):null,a,!u&&s?s:l?l.__e:o.firstChild,u),On(a,i)}Ze=Tn.slice,I={__e:function(i,o,s,u){for(var l,a,f;o=o.__;)if((l=o.__c)&&!l.__)try{if((a=l.constructor)&&a.getDerivedStateFromError!=null&&(l.setState(a.getDerivedStateFromError(i)),f=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(i,u||{}),f=l.__d),f)return l.__E=l}catch(p){i=p}throw i}},Sn=0,Y.prototype.setState=function(i,o){var s;s=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ce({},this.state),typeof i=="function"&&(i=i(ce({},s),this.props)),i&&ce(s,i),i!=null&&this.__v&&(o&&this.__h.push(o),mn(this))},Y.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),mn(this))},Y.prototype.render=le,Re=[],xn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Qe.__r=0;typeof window!="undefined"&&window.__PREACT_DEVTOOLS__&&window.__PREACT_DEVTOOLS__.attachPreact("10.7.2",I,{Fragment:le,Component:Y});var wn={};function ae(i){return i.type===le?"Fragment":typeof i.type=="function"?i.type.displayName||i.type.name:typeof i.type=="string"?i.type:"#text"}var Oe=[],ve=[];function Bn(){return Oe.length>0?Oe[Oe.length-1]:null}var _n=!1;function vt(i){return typeof i.type=="function"&&i.type!=le}function J(i){for(var o=[i],s=i;s.__o!=null;)o.push(s.__o),s=s.__o;return o.reduce(function(u,l){u+="  in "+ae(l);var a=l.__source;return a?u+=" (at "+a.fileName+":"+a.lineNumber+")":_n||(_n=!0,console.warn("Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons.")),u+`
`},"")}var ss=typeof WeakMap=="function",as=Y.prototype.setState;Y.prototype.setState=function(i,o){return this.__v==null?this.state==null&&console.warn(`Calling "this.setState" inside the constructor of a component is a no-op and might be a bug in your application. Instead, set "this.state = {}" directly.

`+J(Bn())):this.__P==null&&console.warn(`Can't call "this.setState" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.

`+J(this.__v)),as.call(this,i,o)};var cs=Y.prototype.forceUpdate;function oe(i){var o=i.props,s=ae(i),u="";for(var l in o)if(o.hasOwnProperty(l)&&l!=="children"){var a=o[l];typeof a=="function"&&(a="function "+(a.displayName||a.name)+"() {}"),a=Object(a)!==a||a.toString?a+"":Object.prototype.toString.call(a),u+=" "+l+"="+JSON.stringify(a)}var f=o.children;return"<"+s+u+(f&&f.length?">..</"+s+">":" />")}Y.prototype.forceUpdate=function(i){return this.__v==null?console.warn(`Calling "this.forceUpdate" inside the constructor of a component is a no-op and might be a bug in your application.

`+J(Bn())):this.__P==null&&console.warn(`Can't call "this.forceUpdate" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.

`+J(this.__v)),cs.call(this,i)},function(){(function(){var m=I.__b,y=I.diffed,b=I.__,N=I.vnode,w=I.__r;I.diffed=function(v){vt(v)&&ve.pop(),Oe.pop(),y&&y(v)},I.__b=function(v){vt(v)&&Oe.push(v),m&&m(v)},I.__=function(v,S){ve=[],b&&b(v,S)},I.vnode=function(v){v.__o=ve.length>0?ve[ve.length-1]:null,N&&N(v)},I.__r=function(v){vt(v)&&ve.push(v),w&&w(v)}})();var i=!1,o=I.__b,s=I.diffed,u=I.vnode,l=I.__e,a=I.__,f=I.__h,p=ss?{useEffect:new WeakMap,useLayoutEffect:new WeakMap,lazyPropTypes:new WeakMap}:null,d=[];I.__e=function(m,y,b,N){if(y&&y.__c&&typeof m.then=="function"){var w=m;m=new Error("Missing Suspense. The throwing component was: "+ae(y));for(var v=y;v;v=v.__)if(v.__c&&v.__c.__c){m=w;break}if(m instanceof Error)throw m}try{(N=N||{}).componentStack=J(y),l(m,y,b,N),typeof m.then!="function"&&setTimeout(function(){throw m})}catch(S){throw S}},I.__=function(m,y){if(!y)throw new Error(`Undefined parent passed to render(), this is the second argument.
Check if the element is available in the DOM/has the correct id.`);var b;switch(y.nodeType){case 1:case 11:case 9:b=!0;break;default:b=!1}if(!b){var N=ae(m);throw new Error("Expected a valid HTML node as a second argument to render.	Received "+y+" instead: render(<"+N+" />, "+y+");")}a&&a(m,y)},I.__b=function(m){var y=m.type,b=function T(E){return E?typeof E.type=="function"?T(E.__):E:{}}(m.__);if(i=!0,y===void 0)throw new Error(`Undefined component passed to createElement()

You likely forgot to export your component or might have mixed up default and named imports`+oe(m)+`

`+J(m));if(y!=null&&typeof y=="object")throw y.__k!==void 0&&y.__e!==void 0?new Error("Invalid type passed to createElement(): "+y+`

Did you accidentally pass a JSX literal as JSX twice?

  let My`+ae(m)+" = "+oe(y)+`;
  let vnode = <My`+ae(m)+` />;

This usually happens when you export a JSX literal and not the component.

`+J(m)):new Error("Invalid type passed to createElement(): "+(Array.isArray(y)?"array":y));if(y!=="thead"&&y!=="tfoot"&&y!=="tbody"||b.type==="table"?y==="tr"&&b.type!=="thead"&&b.type!=="tfoot"&&b.type!=="tbody"&&b.type!=="table"?console.error("Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot/table> parent."+oe(m)+`

`+J(m)):y==="td"&&b.type!=="tr"?console.error("Improper nesting of table. Your <td> should have a <tr> parent."+oe(m)+`

`+J(m)):y==="th"&&b.type!=="tr"&&console.error("Improper nesting of table. Your <th> should have a <tr>."+oe(m)+`

`+J(m)):console.error("Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent."+oe(m)+`

`+J(m)),m.ref!==void 0&&typeof m.ref!="function"&&typeof m.ref!="object"&&!("$$typeof"in m))throw new Error(`Component's "ref" property should be a function, or an object created by createRef(), but got [`+typeof m.ref+`] instead
`+oe(m)+`

`+J(m));if(typeof m.type=="string"){for(var N in m.props)if(N[0]==="o"&&N[1]==="n"&&typeof m.props[N]!="function"&&m.props[N]!=null)throw new Error(`Component's "`+N+'" property should be a function, but got ['+typeof m.props[N]+`] instead
`+oe(m)+`

`+J(m))}if(typeof m.type=="function"&&m.type.propTypes){if(m.type.displayName==="Lazy"&&p&&!p.lazyPropTypes.has(m.type)){var w="PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ";try{var v=m.type();p.lazyPropTypes.set(m.type,!0),console.warn(w+"Component wrapped in lazy() is "+ae(v))}catch{console.warn(w+"We will log the wrapped component's name once it is loaded.")}}var S=m.props;m.type.__f&&delete(S=function(T,E){for(var O in E)T[O]=E[O];return T}({},S)).ref,function(T,E,O,B,D){Object.keys(T).forEach(function(F){var j;try{j=T[F](E,F,B,"prop",null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(H){j=H}!j||j.message in wn||(wn[j.message]=!0,console.error("Failed prop type: "+j.message+(D&&`
`+D()||"")))})}(m.type.propTypes,S,0,ae(m),function(){return J(m)})}o&&o(m)},I.__h=function(m,y,b){if(!m||!i)throw new Error("Hook can only be invoked from render methods.");f&&f(m,y,b)};var C=function(m,y){return{get:function(){var b="get"+m+y;d&&d.indexOf(b)<0&&(d.push(b),console.warn("getting vnode."+m+" is deprecated, "+y))},set:function(){var b="set"+m+y;d&&d.indexOf(b)<0&&(d.push(b),console.warn("setting vnode."+m+" is not allowed, "+y))}}},g={nodeName:C("nodeName","use vnode.type"),attributes:C("attributes","use vnode.props"),children:C("children","use vnode.props.children")},P=Object.create({},g);I.vnode=function(m){var y=m.props;if(m.type!==null&&y!=null&&("__source"in y||"__self"in y)){var b=m.props={};for(var N in y){var w=y[N];N==="__source"?m.__source=w:N==="__self"?m.__self=w:b[N]=w}}m.__proto__=P,u&&u(m)},I.diffed=function(m){if(m.__k&&m.__k.forEach(function(v){if(v&&v.type===void 0){delete v.__,delete v.__b;var S=Object.keys(v).join(",");throw new Error("Objects are not valid as a child. Encountered an object with the keys {"+S+`}.

`+J(m))}}),i=!1,s&&s(m),m.__k!=null)for(var y=[],b=0;b<m.__k.length;b++){var N=m.__k[b];if(N&&N.key!=null){var w=N.key;if(y.indexOf(w)!==-1){console.error('Following component has two or more children with the same key attribute: "'+w+`". This may cause glitches and misbehavior in rendering process. Component: 

`+oe(m)+`

`+J(m));break}y.push(w)}}}}();function us(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Be={},ls=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Un={},K={};let Pt;const fs=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];K.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17};K.getSymbolTotalCodewords=function(o){return fs[o]};K.getBCHDigit=function(i){let o=0;for(;i!==0;)o++,i>>>=1;return o};K.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');Pt=o};K.isKanjiModeEnabled=function(){return typeof Pt!="undefined"};K.toSJIS=function(o){return Pt(o)};var et={};(function(i){i.L={bit:1},i.M={bit:0},i.Q={bit:3},i.H={bit:2};function o(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return i.L;case"m":case"medium":return i.M;case"q":case"quartile":return i.Q;case"h":case"high":return i.H;default:throw new Error("Unknown EC Level: "+s)}}i.isValid=function(u){return u&&typeof u.bit!="undefined"&&u.bit>=0&&u.bit<4},i.from=function(u,l){if(i.isValid(u))return u;try{return o(u)}catch{return l}}})(et);function Dn(){this.buffer=[],this.length=0}Dn.prototype={get:function(i){const o=Math.floor(i/8);return(this.buffer[o]>>>7-i%8&1)===1},put:function(i,o){for(let s=0;s<o;s++)this.putBit((i>>>o-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){const o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),i&&(this.buffer[o]|=128>>>this.length%8),this.length++}};var hs=Dn;function Ue(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}Ue.prototype.set=function(i,o,s,u){const l=i*this.size+o;this.data[l]=s,u&&(this.reservedBit[l]=!0)};Ue.prototype.get=function(i,o){return this.data[i*this.size+o]};Ue.prototype.xor=function(i,o,s){this.data[i*this.size+o]^=s};Ue.prototype.isReserved=function(i,o){return this.reservedBit[i*this.size+o]};var ds=Ue,jn={};(function(i){const o=K.getSymbolSize;i.getRowColCoords=function(u){if(u===1)return[];const l=Math.floor(u/7)+2,a=o(u),f=a===145?26:Math.ceil((a-13)/(2*l-2))*2,p=[a-7];for(let d=1;d<l-1;d++)p[d]=p[d-1]-f;return p.push(6),p.reverse()},i.getPositions=function(u){const l=[],a=i.getRowColCoords(u),f=a.length;for(let p=0;p<f;p++)for(let d=0;d<f;d++)p===0&&d===0||p===0&&d===f-1||p===f-1&&d===0||l.push([a[p],a[d]]);return l}})(jn);var Fn={};const ps=K.getSymbolSize,bn=7;Fn.getPositions=function(o){const s=ps(o);return[[0,0],[s-bn,0],[0,s-bn]]};var Hn={};(function(i){i.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const o={N1:3,N2:3,N3:40,N4:10};i.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},i.from=function(l){return i.isValid(l)?parseInt(l,10):void 0},i.getPenaltyN1=function(l){const a=l.size;let f=0,p=0,d=0,C=null,g=null;for(let P=0;P<a;P++){p=d=0,C=g=null;for(let m=0;m<a;m++){let y=l.get(P,m);y===C?p++:(p>=5&&(f+=o.N1+(p-5)),C=y,p=1),y=l.get(m,P),y===g?d++:(d>=5&&(f+=o.N1+(d-5)),g=y,d=1)}p>=5&&(f+=o.N1+(p-5)),d>=5&&(f+=o.N1+(d-5))}return f},i.getPenaltyN2=function(l){const a=l.size;let f=0;for(let p=0;p<a-1;p++)for(let d=0;d<a-1;d++){const C=l.get(p,d)+l.get(p,d+1)+l.get(p+1,d)+l.get(p+1,d+1);(C===4||C===0)&&f++}return f*o.N2},i.getPenaltyN3=function(l){const a=l.size;let f=0,p=0,d=0;for(let C=0;C<a;C++){p=d=0;for(let g=0;g<a;g++)p=p<<1&2047|l.get(C,g),g>=10&&(p===1488||p===93)&&f++,d=d<<1&2047|l.get(g,C),g>=10&&(d===1488||d===93)&&f++}return f*o.N3},i.getPenaltyN4=function(l){let a=0;const f=l.data.length;for(let d=0;d<f;d++)a+=l.data[d];return Math.abs(Math.ceil(a*100/f/5)-10)*o.N4};function s(u,l,a){switch(u){case i.Patterns.PATTERN000:return(l+a)%2===0;case i.Patterns.PATTERN001:return l%2===0;case i.Patterns.PATTERN010:return a%3===0;case i.Patterns.PATTERN011:return(l+a)%3===0;case i.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(a/3))%2===0;case i.Patterns.PATTERN101:return l*a%2+l*a%3===0;case i.Patterns.PATTERN110:return(l*a%2+l*a%3)%2===0;case i.Patterns.PATTERN111:return(l*a%3+(l+a)%2)%2===0;default:throw new Error("bad maskPattern:"+u)}}i.applyMask=function(l,a){const f=a.size;for(let p=0;p<f;p++)for(let d=0;d<f;d++)a.isReserved(d,p)||a.xor(d,p,s(l,d,p))},i.getBestMask=function(l,a){const f=Object.keys(i.Patterns).length;let p=0,d=1/0;for(let C=0;C<f;C++){a(C),i.applyMask(C,l);const g=i.getPenaltyN1(l)+i.getPenaltyN2(l)+i.getPenaltyN3(l)+i.getPenaltyN4(l);i.applyMask(C,l),g<d&&(d=g,p=C)}return p}})(Hn);var tt={};const ue=et,Ve=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Je=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];tt.getBlocksCount=function(o,s){switch(s){case ue.L:return Ve[(o-1)*4+0];case ue.M:return Ve[(o-1)*4+1];case ue.Q:return Ve[(o-1)*4+2];case ue.H:return Ve[(o-1)*4+3];default:return}};tt.getTotalCodewordsCount=function(o,s){switch(s){case ue.L:return Je[(o-1)*4+0];case ue.M:return Je[(o-1)*4+1];case ue.Q:return Je[(o-1)*4+2];case ue.H:return Je[(o-1)*4+3];default:return}};var zn={},nt={};const Ie=new Uint8Array(512),Ke=new Uint8Array(256);(function(){let o=1;for(let s=0;s<255;s++)Ie[s]=o,Ke[o]=s,o<<=1,o&256&&(o^=285);for(let s=255;s<512;s++)Ie[s]=Ie[s-255]})();nt.log=function(o){if(o<1)throw new Error("log("+o+")");return Ke[o]};nt.exp=function(o){return Ie[o]};nt.mul=function(o,s){return o===0||s===0?0:Ie[Ke[o]+Ke[s]]};(function(i){const o=nt;i.mul=function(u,l){const a=new Uint8Array(u.length+l.length-1);for(let f=0;f<u.length;f++)for(let p=0;p<l.length;p++)a[f+p]^=o.mul(u[f],l[p]);return a},i.mod=function(u,l){let a=new Uint8Array(u);for(;a.length-l.length>=0;){const f=a[0];for(let d=0;d<l.length;d++)a[d]^=o.mul(l[d],f);let p=0;for(;p<a.length&&a[p]===0;)p++;a=a.slice(p)}return a},i.generateECPolynomial=function(u){let l=new Uint8Array([1]);for(let a=0;a<u;a++)l=i.mul(l,new Uint8Array([1,o.exp(a)]));return l}})(zn);const qn=zn;function At(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}At.prototype.initialize=function(o){this.degree=o,this.genPoly=qn.generateECPolynomial(this.degree)};At.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(o.length+this.degree);s.set(o);const u=qn.mod(s,this.genPoly),l=this.degree-u.length;if(l>0){const a=new Uint8Array(this.degree);return a.set(u,l),a}return u};var ms=At,$n={},fe={},Lt={};Lt.isValid=function(o){return!isNaN(o)&&o>=1&&o<=40};var ne={};const Vn="[0-9]+",gs="[A-Z $%*+\\-./:]+";let Me="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Me=Me.replace(/u/g,"\\u");const ys="(?:(?![A-Z0-9 $%*+\\-./:]|"+Me+`)(?:.|[\r
]))+`;ne.KANJI=new RegExp(Me,"g");ne.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");ne.BYTE=new RegExp(ys,"g");ne.NUMERIC=new RegExp(Vn,"g");ne.ALPHANUMERIC=new RegExp(gs,"g");const vs=new RegExp("^"+Me+"$"),ws=new RegExp("^"+Vn+"$"),_s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ne.testKanji=function(o){return vs.test(o)};ne.testNumeric=function(o){return ws.test(o)};ne.testAlphanumeric=function(o){return _s.test(o)};(function(i){const o=Lt,s=ne;i.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},i.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},i.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},i.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},i.MIXED={bit:-1},i.getCharCountIndicator=function(a,f){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!o.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?a.ccBits[0]:f<27?a.ccBits[1]:a.ccBits[2]},i.getBestModeForData=function(a){return s.testNumeric(a)?i.NUMERIC:s.testAlphanumeric(a)?i.ALPHANUMERIC:s.testKanji(a)?i.KANJI:i.BYTE},i.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},i.isValid=function(a){return a&&a.bit&&a.ccBits};function u(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return i.NUMERIC;case"alphanumeric":return i.ALPHANUMERIC;case"kanji":return i.KANJI;case"byte":return i.BYTE;default:throw new Error("Unknown mode: "+l)}}i.from=function(a,f){if(i.isValid(a))return a;try{return u(a)}catch{return f}}})(fe);(function(i){const o=K,s=tt,u=et,l=fe,a=Lt,f=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,p=o.getBCHDigit(f);function d(m,y,b){for(let N=1;N<=40;N++)if(y<=i.getCapacity(N,b,m))return N}function C(m,y){return l.getCharCountIndicator(m,y)+4}function g(m,y){let b=0;return m.forEach(function(N){b+=C(N.mode,y)+N.getBitsLength()}),b}function P(m,y){for(let b=1;b<=40;b++)if(g(m,b)<=i.getCapacity(b,y,l.MIXED))return b}i.from=function(y,b){return a.isValid(y)?parseInt(y,10):b},i.getCapacity=function(y,b,N){if(!a.isValid(y))throw new Error("Invalid QR Code version");typeof N=="undefined"&&(N=l.BYTE);const w=o.getSymbolTotalCodewords(y),v=s.getTotalCodewordsCount(y,b),S=(w-v)*8;if(N===l.MIXED)return S;const T=S-C(N,y);switch(N){case l.NUMERIC:return Math.floor(T/10*3);case l.ALPHANUMERIC:return Math.floor(T/11*2);case l.KANJI:return Math.floor(T/13);case l.BYTE:default:return Math.floor(T/8)}},i.getBestVersionForData=function(y,b){let N;const w=u.from(b,u.M);if(Array.isArray(y)){if(y.length>1)return P(y,w);if(y.length===0)return 1;N=y[0]}else N=y;return d(N.mode,N.getLength(),w)},i.getEncodedBits=function(y){if(!a.isValid(y)||y<7)throw new Error("Invalid QR Code version");let b=y<<12;for(;o.getBCHDigit(b)-p>=0;)b^=f<<o.getBCHDigit(b)-p;return y<<12|b}})($n);var Jn={};const Ct=K,Xn=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,bs=1<<14|1<<12|1<<10|1<<4|1<<1,kn=Ct.getBCHDigit(Xn);Jn.getEncodedBits=function(o,s){const u=o.bit<<3|s;let l=u<<10;for(;Ct.getBCHDigit(l)-kn>=0;)l^=Xn<<Ct.getBCHDigit(l)-kn;return(u<<10|l)^bs};var Wn={};const ks=fe;function ke(i){this.mode=ks.NUMERIC,this.data=i.toString()}ke.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)};ke.prototype.getLength=function(){return this.data.length};ke.prototype.getBitsLength=function(){return ke.getBitsLength(this.data.length)};ke.prototype.write=function(o){let s,u,l;for(s=0;s+3<=this.data.length;s+=3)u=this.data.substr(s,3),l=parseInt(u,10),o.put(l,10);const a=this.data.length-s;a>0&&(u=this.data.substr(s),l=parseInt(u,10),o.put(l,a*3+1))};var Ns=ke;const Cs=fe,wt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ne(i){this.mode=Cs.ALPHANUMERIC,this.data=i}Ne.getBitsLength=function(o){return 11*Math.floor(o/2)+6*(o%2)};Ne.prototype.getLength=function(){return this.data.length};Ne.prototype.getBitsLength=function(){return Ne.getBitsLength(this.data.length)};Ne.prototype.write=function(o){let s;for(s=0;s+2<=this.data.length;s+=2){let u=wt.indexOf(this.data[s])*45;u+=wt.indexOf(this.data[s+1]),o.put(u,11)}this.data.length%2&&o.put(wt.indexOf(this.data[s]),6)};var Ss=Ne,xs=function(o){for(var s=[],u=o.length,l=0;l<u;l++){var a=o.charCodeAt(l);if(a>=55296&&a<=56319&&u>l+1){var f=o.charCodeAt(l+1);f>=56320&&f<=57343&&(a=(a-55296)*1024+f-56320+65536,l+=1)}if(a<128){s.push(a);continue}if(a<2048){s.push(a>>6|192),s.push(a&63|128);continue}if(a<55296||a>=57344&&a<65536){s.push(a>>12|224),s.push(a>>6&63|128),s.push(a&63|128);continue}if(a>=65536&&a<=1114111){s.push(a>>18|240),s.push(a>>12&63|128),s.push(a>>6&63|128),s.push(a&63|128);continue}s.push(239,191,189)}return new Uint8Array(s).buffer};const Ts=xs,Es=fe;function Ce(i){this.mode=Es.BYTE,this.data=new Uint8Array(Ts(i))}Ce.getBitsLength=function(o){return o*8};Ce.prototype.getLength=function(){return this.data.length};Ce.prototype.getBitsLength=function(){return Ce.getBitsLength(this.data.length)};Ce.prototype.write=function(i){for(let o=0,s=this.data.length;o<s;o++)i.put(this.data[o],8)};var Ps=Ce;const As=fe,Ls=K;function Se(i){this.mode=As.KANJI,this.data=i}Se.getBitsLength=function(o){return o*13};Se.prototype.getLength=function(){return this.data.length};Se.prototype.getBitsLength=function(){return Se.getBitsLength(this.data.length)};Se.prototype.write=function(i){let o;for(o=0;o<this.data.length;o++){let s=Ls.toSJIS(this.data[o]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[o]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),i.put(s,13)}};var Rs=Se,Qn={exports:{}};(function(i){var o={single_source_shortest_paths:function(s,u,l){var a={},f={};f[u]=0;var p=o.PriorityQueue.make();p.push(u,0);for(var d,C,g,P,m,y,b,N,w;!p.empty();){d=p.pop(),C=d.value,P=d.cost,m=s[C]||{};for(g in m)m.hasOwnProperty(g)&&(y=m[g],b=P+y,N=f[g],w=typeof f[g]=="undefined",(w||N>b)&&(f[g]=b,p.push(g,b),a[g]=C))}if(typeof l!="undefined"&&typeof f[l]=="undefined"){var v=["Could not find a path from ",u," to ",l,"."].join("");throw new Error(v)}return a},extract_shortest_path_from_predecessor_list:function(s,u){for(var l=[],a=u;a;)l.push(a),a=s[a];return l.reverse(),l},find_path:function(s,u,l){var a=o.single_source_shortest_paths(s,u,l);return o.extract_shortest_path_from_predecessor_list(a,l)},PriorityQueue:{make:function(s){var u=o.PriorityQueue,l={},a;s=s||{};for(a in u)u.hasOwnProperty(a)&&(l[a]=u[a]);return l.queue=[],l.sorter=s.sorter||u.default_sorter,l},default_sorter:function(s,u){return s.cost-u.cost},push:function(s,u){var l={value:s,cost:u};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};i.exports=o})(Qn);(function(i){const o=fe,s=Ns,u=Ss,l=Ps,a=Rs,f=ne,p=K,d=Qn.exports;function C(v){return unescape(encodeURIComponent(v)).length}function g(v,S,T){const E=[];let O;for(;(O=v.exec(T))!==null;)E.push({data:O[0],index:O.index,mode:S,length:O[0].length});return E}function P(v){const S=g(f.NUMERIC,o.NUMERIC,v),T=g(f.ALPHANUMERIC,o.ALPHANUMERIC,v);let E,O;return p.isKanjiModeEnabled()?(E=g(f.BYTE,o.BYTE,v),O=g(f.KANJI,o.KANJI,v)):(E=g(f.BYTE_KANJI,o.BYTE,v),O=[]),S.concat(T,E,O).sort(function(D,F){return D.index-F.index}).map(function(D){return{data:D.data,mode:D.mode,length:D.length}})}function m(v,S){switch(S){case o.NUMERIC:return s.getBitsLength(v);case o.ALPHANUMERIC:return u.getBitsLength(v);case o.KANJI:return a.getBitsLength(v);case o.BYTE:return l.getBitsLength(v)}}function y(v){return v.reduce(function(S,T){const E=S.length-1>=0?S[S.length-1]:null;return E&&E.mode===T.mode?(S[S.length-1].data+=T.data,S):(S.push(T),S)},[])}function b(v){const S=[];for(let T=0;T<v.length;T++){const E=v[T];switch(E.mode){case o.NUMERIC:S.push([E,{data:E.data,mode:o.ALPHANUMERIC,length:E.length},{data:E.data,mode:o.BYTE,length:E.length}]);break;case o.ALPHANUMERIC:S.push([E,{data:E.data,mode:o.BYTE,length:E.length}]);break;case o.KANJI:S.push([E,{data:E.data,mode:o.BYTE,length:C(E.data)}]);break;case o.BYTE:S.push([{data:E.data,mode:o.BYTE,length:C(E.data)}])}}return S}function N(v,S){const T={},E={start:{}};let O=["start"];for(let B=0;B<v.length;B++){const D=v[B],F=[];for(let j=0;j<D.length;j++){const H=D[j],he=""+B+j;F.push(he),T[he]={node:H,lastCount:0},E[he]={};for(let xe=0;xe<O.length;xe++){const Z=O[xe];T[Z]&&T[Z].node.mode===H.mode?(E[Z][he]=m(T[Z].lastCount+H.length,H.mode)-m(T[Z].lastCount,H.mode),T[Z].lastCount+=H.length):(T[Z]&&(T[Z].lastCount=H.length),E[Z][he]=m(H.length,H.mode)+4+o.getCharCountIndicator(H.mode,S))}}O=F}for(let B=0;B<O.length;B++)E[O[B]].end=0;return{map:E,table:T}}function w(v,S){let T;const E=o.getBestModeForData(v);if(T=o.from(S,E),T!==o.BYTE&&T.bit<E.bit)throw new Error('"'+v+'" cannot be encoded with mode '+o.toString(T)+`.
 Suggested mode is: `+o.toString(E));switch(T===o.KANJI&&!p.isKanjiModeEnabled()&&(T=o.BYTE),T){case o.NUMERIC:return new s(v);case o.ALPHANUMERIC:return new u(v);case o.KANJI:return new a(v);case o.BYTE:return new l(v)}}i.fromArray=function(S){return S.reduce(function(T,E){return typeof E=="string"?T.push(w(E,null)):E.data&&T.push(w(E.data,E.mode)),T},[])},i.fromString=function(S,T){const E=P(S,p.isKanjiModeEnabled()),O=b(E),B=N(O,T),D=d.find_path(B.map,"start","end"),F=[];for(let j=1;j<D.length-1;j++)F.push(B.table[D[j]].node);return i.fromArray(y(F))},i.rawSplit=function(S){return i.fromArray(P(S,p.isKanjiModeEnabled()))}})(Wn);const rt=K,_t=et,Os=hs,Is=ds,Ms=jn,Bs=Fn,St=Hn,xt=tt,Us=ms,Ge=$n,Ds=Jn,js=fe,bt=Wn;function Fs(i,o){const s=i.size,u=Bs.getPositions(o);for(let l=0;l<u.length;l++){const a=u[l][0],f=u[l][1];for(let p=-1;p<=7;p++)if(!(a+p<=-1||s<=a+p))for(let d=-1;d<=7;d++)f+d<=-1||s<=f+d||(p>=0&&p<=6&&(d===0||d===6)||d>=0&&d<=6&&(p===0||p===6)||p>=2&&p<=4&&d>=2&&d<=4?i.set(a+p,f+d,!0,!0):i.set(a+p,f+d,!1,!0))}}function Hs(i){const o=i.size;for(let s=8;s<o-8;s++){const u=s%2===0;i.set(s,6,u,!0),i.set(6,s,u,!0)}}function zs(i,o){const s=Ms.getPositions(o);for(let u=0;u<s.length;u++){const l=s[u][0],a=s[u][1];for(let f=-2;f<=2;f++)for(let p=-2;p<=2;p++)f===-2||f===2||p===-2||p===2||f===0&&p===0?i.set(l+f,a+p,!0,!0):i.set(l+f,a+p,!1,!0)}}function qs(i,o){const s=i.size,u=Ge.getEncodedBits(o);let l,a,f;for(let p=0;p<18;p++)l=Math.floor(p/3),a=p%3+s-8-3,f=(u>>p&1)===1,i.set(l,a,f,!0),i.set(a,l,f,!0)}function kt(i,o,s){const u=i.size,l=Ds.getEncodedBits(o,s);let a,f;for(a=0;a<15;a++)f=(l>>a&1)===1,a<6?i.set(a,8,f,!0):a<8?i.set(a+1,8,f,!0):i.set(u-15+a,8,f,!0),a<8?i.set(8,u-a-1,f,!0):a<9?i.set(8,15-a-1+1,f,!0):i.set(8,15-a-1,f,!0);i.set(u-8,8,1,!0)}function $s(i,o){const s=i.size;let u=-1,l=s-1,a=7,f=0;for(let p=s-1;p>0;p-=2)for(p===6&&p--;;){for(let d=0;d<2;d++)if(!i.isReserved(l,p-d)){let C=!1;f<o.length&&(C=(o[f]>>>a&1)===1),i.set(l,p-d,C),a--,a===-1&&(f++,a=7)}if(l+=u,l<0||s<=l){l-=u,u=-u;break}}}function Vs(i,o,s){const u=new Os;s.forEach(function(d){u.put(d.mode.bit,4),u.put(d.getLength(),js.getCharCountIndicator(d.mode,i)),d.write(u)});const l=rt.getSymbolTotalCodewords(i),a=xt.getTotalCodewordsCount(i,o),f=(l-a)*8;for(u.getLengthInBits()+4<=f&&u.put(0,4);u.getLengthInBits()%8!==0;)u.putBit(0);const p=(f-u.getLengthInBits())/8;for(let d=0;d<p;d++)u.put(d%2?17:236,8);return Js(u,i,o)}function Js(i,o,s){const u=rt.getSymbolTotalCodewords(o),l=xt.getTotalCodewordsCount(o,s),a=u-l,f=xt.getBlocksCount(o,s),p=u%f,d=f-p,C=Math.floor(u/f),g=Math.floor(a/f),P=g+1,m=C-g,y=new Us(m);let b=0;const N=new Array(f),w=new Array(f);let v=0;const S=new Uint8Array(i.buffer);for(let D=0;D<f;D++){const F=D<d?g:P;N[D]=S.slice(b,b+F),w[D]=y.encode(N[D]),b+=F,v=Math.max(v,F)}const T=new Uint8Array(u);let E=0,O,B;for(O=0;O<v;O++)for(B=0;B<f;B++)O<N[B].length&&(T[E++]=N[B][O]);for(O=0;O<m;O++)for(B=0;B<f;B++)T[E++]=w[B][O];return T}function Xs(i,o,s,u){let l;if(Array.isArray(i))l=bt.fromArray(i);else if(typeof i=="string"){let C=o;if(!C){const g=bt.rawSplit(i);C=Ge.getBestVersionForData(g,s)}l=bt.fromString(i,C||40)}else throw new Error("Invalid data");const a=Ge.getBestVersionForData(l,s);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!o)o=a;else if(o<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);const f=Vs(o,s,l),p=rt.getSymbolSize(o),d=new Is(p);return Fs(d,o),Hs(d),zs(d,o),kt(d,s,0),o>=7&&qs(d,o),$s(d,f),isNaN(u)&&(u=St.getBestMask(d,kt.bind(null,d,s))),St.applyMask(u,d),kt(d,s,u),{modules:d,version:o,errorCorrectionLevel:s,maskPattern:u,segments:l}}Un.create=function(o,s){if(typeof o=="undefined"||o==="")throw new Error("No input text");let u=_t.M,l,a;return typeof s!="undefined"&&(u=_t.from(s.errorCorrectionLevel,_t.M),l=Ge.from(s.version),a=St.from(s.maskPattern),s.toSJISFunc&&rt.setToSJISFunction(s.toSJISFunc)),Xs(o,l,u,a)};var Yn={},Rt={};(function(i){function o(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let u=s.slice().replace("#","").split("");if(u.length<3||u.length===5||u.length>8)throw new Error("Invalid hex color: "+s);(u.length===3||u.length===4)&&(u=Array.prototype.concat.apply([],u.map(function(a){return[a,a]}))),u.length===6&&u.push("F","F");const l=parseInt(u.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+u.slice(0,6).join("")}}i.getOptions=function(u){u||(u={}),u.color||(u.color={});const l=typeof u.margin=="undefined"||u.margin===null||u.margin<0?4:u.margin,a=u.width&&u.width>=21?u.width:void 0,f=u.scale||4;return{width:a,scale:a?4:f,margin:l,color:{dark:o(u.color.dark||"#000000ff"),light:o(u.color.light||"#ffffffff")},type:u.type,rendererOpts:u.rendererOpts||{}}},i.getScale=function(u,l){return l.width&&l.width>=u+l.margin*2?l.width/(u+l.margin*2):l.scale},i.getImageWidth=function(u,l){const a=i.getScale(u,l);return Math.floor((u+l.margin*2)*a)},i.qrToImageData=function(u,l,a){const f=l.modules.size,p=l.modules.data,d=i.getScale(f,a),C=Math.floor((f+a.margin*2)*d),g=a.margin*d,P=[a.color.light,a.color.dark];for(let m=0;m<C;m++)for(let y=0;y<C;y++){let b=(m*C+y)*4,N=a.color.light;if(m>=g&&y>=g&&m<C-g&&y<C-g){const w=Math.floor((m-g)/d),v=Math.floor((y-g)/d);N=P[p[w*f+v]?1:0]}u[b++]=N.r,u[b++]=N.g,u[b++]=N.b,u[b]=N.a}}})(Rt);(function(i){const o=Rt;function s(l,a,f){l.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=f,a.width=f,a.style.height=f+"px",a.style.width=f+"px"}function u(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}i.render=function(a,f,p){let d=p,C=f;typeof d=="undefined"&&(!f||!f.getContext)&&(d=f,f=void 0),f||(C=u()),d=o.getOptions(d);const g=o.getImageWidth(a.modules.size,d),P=C.getContext("2d"),m=P.createImageData(g,g);return o.qrToImageData(m.data,a,d),s(P,C,g),P.putImageData(m,0,0),C},i.renderToDataURL=function(a,f,p){let d=p;typeof d=="undefined"&&(!f||!f.getContext)&&(d=f,f=void 0),d||(d={});const C=i.render(a,f,d),g=d.type||"image/png",P=d.rendererOpts||{};return C.toDataURL(g,P.quality)}})(Yn);var Kn={};const Ws=Rt;function Nn(i,o){const s=i.a/255,u=o+'="'+i.hex+'"';return s<1?u+" "+o+'-opacity="'+s.toFixed(2).slice(1)+'"':u}function Nt(i,o,s){let u=i+o;return typeof s!="undefined"&&(u+=" "+s),u}function Qs(i,o,s){let u="",l=0,a=!1,f=0;for(let p=0;p<i.length;p++){const d=Math.floor(p%o),C=Math.floor(p/o);!d&&!a&&(a=!0),i[p]?(f++,p>0&&d>0&&i[p-1]||(u+=a?Nt("M",d+s,.5+C+s):Nt("m",l,0),l=0,a=!1),d+1<o&&i[p+1]||(u+=Nt("h",f),f=0)):l++}return u}Kn.render=function(o,s,u){const l=Ws.getOptions(s),a=o.modules.size,f=o.modules.data,p=a+l.margin*2,d=l.color.light.a?"<path "+Nn(l.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",C="<path "+Nn(l.color.dark,"stroke")+' d="'+Qs(f,a,l.margin)+'"/>',g='viewBox="0 0 '+p+" "+p+'"',P=l.width?'width="'+l.width+'" height="'+l.width+'" ':"",m='<svg xmlns="http://www.w3.org/2000/svg" '+P+g+' shape-rendering="crispEdges">'+d+C+`</svg>
`;return typeof u=="function"&&u(null,m),m};const Ys=ls,Tt=Un,Gn=Yn,Ks=Kn;function Ot(i,o,s,u,l){const a=[].slice.call(arguments,1),f=a.length,p=typeof a[f-1]=="function";if(!p&&!Ys())throw new Error("Callback required as last argument");if(p){if(f<2)throw new Error("Too few arguments provided");f===2?(l=s,s=o,o=u=void 0):f===3&&(o.getContext&&typeof l=="undefined"?(l=u,u=void 0):(l=u,u=s,s=o,o=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(s=o,o=u=void 0):f===2&&!o.getContext&&(u=s,s=o,o=void 0),new Promise(function(d,C){try{const g=Tt.create(s,u);d(i(g,o,u))}catch(g){C(g)}})}try{const d=Tt.create(s,u);l(null,i(d,o,u))}catch(d){l(d)}}Be.create=Tt.create;Be.toCanvas=Ot.bind(null,Gn.render);Be.toDataURL=Ot.bind(null,Gn.renderToDataURL);Be.toString=Ot.bind(null,function(i,o,s){return Ks.render(i,s)});function we(i){return{weekly:"semana",monthly:"m\xEAs",bimonthly:"bimestre",quarterly:"trimestre","semi-annually":"semestre",annually:"ano"}[i]}function te(i,o=!1){setTimeout(function(){i.indexOf("?")>-1?window.location.href=o?i+"&"+o:i:window.location.href=o?i+"?"+o:i},1200)}function _e(i){i=i.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+i+"=([^&#]*)"),s=o.exec(location.search);return s===null?null:decodeURIComponent(s[1].replace(/\+/g," "))}function Gs(i,o){if(i.indexOf("#")===0&&(i=i.slice(1)),i.length===3&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]),i.length!==6)throw new Error("Invalid HEX color.");var s=parseInt(i.slice(0,2),16),u=parseInt(i.slice(2,4),16),l=parseInt(i.slice(4,6),16);return o?s*.299+u*.587+l*.114>186?"#000000":"#FFFFFF":(s=(255-s).toString(16),u=(255-u).toString(16),l=(255-l).toString(16),"#"+padZero(s)+padZero(u)+padZero(l))}function It(i,o,s,u,l){let a=`code_senha=${i}`;return o&&(a+=`&token=${o}`),s&&(a+=`&amount=${s}`),u&&(a+="&pix_upsell=true"),l==="kiwipay"&&(a+="&payment_version=kiwipay"),a}function Zs(i){let o,s;try{o=document.createElement("textarea"),o.setAttribute("readonly",!0),o.setAttribute("contenteditable",!0),o.style.position="fixed",o.value=i,document.body.appendChild(o),o.select();const u=document.createRange();u.selectNodeContents(o);const l=window.getSelection();l.removeAllRanges(),l.addRange(u),o.setSelectionRange(0,o.value.length),s=document.execCommand("copy")}catch(u){console.error(u),s=null}finally{document.body.removeChild(o)}if(!s){const l=navigator.platform.toUpperCase().indexOf("MAC")>=0?"\u2318C":"CTRL+C";if(s=prompt(`Press ${l}`,i),!s)return!1}return!0}var ea=0;function k(i,o,s,u,l){var a,f,p={};for(f in o)f=="ref"?a=o[f]:p[f]=o[f];var d={type:i,props:p,key:s,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--ea,__source:l,__self:u};if(typeof i=="function"&&(a=i.defaultProps))for(f in a)p[f]===void 0&&(p[f]=a[f]);return I.vnode&&I.vnode(d),d}var Le="/Users/udi/kiwify/upsell/src/components/PaymentOnlyForm.jsx";class ta extends Y{constructor(o){super()}render(o,s){return k("div",{children:k("div",{className:"kw-mt-3 kw-text-center",children:[k("h3",{className:"kw-text-lg kw-leading-6 kw-font-sans kw-font-bold kw-text-gray-900",id:"modal-headline",children:o.translate("payment_only.title")},void 0,!1,{fileName:Le,lineNumber:11,columnNumber:11},this),k("div",{className:"kw-mt-2",children:k("div",{className:"kw-text-sm kw-my-4 kw-text-[#a0aec0] kw-font-sans",children:o.translate("payment_only.subtitle")},void 0,!1,{fileName:Le,lineNumber:15,columnNumber:13},this)},void 0,!1,{fileName:Le,lineNumber:14,columnNumber:11},this)]},void 0,!0,{fileName:Le,lineNumber:10,columnNumber:9},this)},void 0,!1,{fileName:Le,lineNumber:9,columnNumber:7})}}var Cn,na=(function(i,o){i.exports=function(s,u,l,a,f){for(u=u.split?u.split("."):u,a=0;a<u.length;a++)s=s?s[u[a]]:f;return s===f?l:s}}(Cn={path:void 0,exports:{},require:function(i,o){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}}),Cn.exports);function ra(i,o,s){var u=o.split("."),l=i.__lsc||(i.__lsc={});return l[o+s]||(l[o+s]=function(a){for(var f=a&&a.target||this,p={},d=p,C=typeof s=="string"?na(a,s):f&&f.nodeName?f.type.match(/^che|rad/)?f.checked:f.value:a,g=0;g<u.length-1;g++)d=d[u[g]]||(d[u[g]]=!g&&i.state[u[g]]||{});d[u[g]]=C,i.setState(p)})}var Q="/Users/udi/kiwify/upsell/src/components/CreditCardForm.jsx";class ia extends Y{constructor(s){super();q(this,"setupFeeRenewalText",()=>{if(this.props.data.subscription&&this.props.data.subscription.setup_fee_enabled){let s=this.state.options.findIndex(u=>u.key==this.state.selectedOption);return s!==-1?k("div",{className:"kw-text-center kw-text-sm kw-mt-3 kw-leading-none kw-text-gray-700",children:this.state.options[s].renewal},void 0,!1,{fileName:Q,lineNumber:92,columnNumber:25}):null}else return k("div",{},void 0,!1,{fileName:Q,lineNumber:94,columnNumber:14})});q(this,"calculateInterest",(s,u)=>{const l=parseFloat(.029900000000000003 .toFixed(4)),a=u,f=parseFloat(((l/(1-Math.pow(1+l,-a))*a-1)*100).toFixed(4));return Math.round(s*f/100)});q(this,"subscriptionFrequencySetupFee",()=>this.props.data.subscription?this.props.translate("subscriptionFrequency")[this.props.data.subscription.frequency]:null);q(this,"calculateSetupFeeInstallments",()=>{let s=[],u=this.props.data.price;if(u>0){parseFloat((2.99/100).toFixed(4));let l=this.props.data.subscription.installments;for(let a=l-1;a>-1;a--){let f=0,d=a+1;const C=parseFloat((u+f)/d/100);let g=this.props.data.subscription.setup_fee,P=this.calculateInterest(this.props.data.subscription.setup_fee,d);g=parseFloat((this.props.data.subscription.setup_fee+P)/d),(C>5||u<=500&&d==1)&&s.push(g)}}return s.reverse()});q(this,"setupOptions",()=>{const s=this.props.formatCurrency;let u=[];if(this.props.data.subscription){let{subscription:l}=this.props.data,a=[];if(l.installments!==1){l.setup_fee_enabled&&(a=this.calculateSetupFeeInstallments());for(let f=0;f<l.installments;f++)f+1===1?u.push({key:f+1,value:this.props.setupFeeEnabled?`${s(l.setup_fee)} para ${this.subscriptionFrequencySetupFee()}`:`${s(l.price)} / ${we(l.frequency)}`,renewal:this.props.setupFeeEnabled?`Depois renova por ${s(l.price)} / ${we(l.frequency)}`:null}):this.props.data.installments[f]>500&&u.push({key:f+1,value:this.props.setupFeeEnabled?`${f+1}x de ${s(a[f])} para ${this.subscriptionFrequencySetupFee()}`:`${f+1}x de ${s(this.props.data.installments[f])} / ${we(l.frequency)}`,renewal:this.props.setupFeeEnabled?`Depois renova por ${f+1}x de ${s(this.props.data.installments[f])} / ${we(l.frequency)}`:null});u.reverse()}else u.push({key:1,value:this.props.setupFeeEnabled?`${s(l.setup_fee)} para ${this.subscriptionFrequencySetupFee()}`:`${s(l.price)} / ${we(l.frequency)}`,renewal:this.props.setupFeeEnabled?`Depois renova por ${s(l.price)} / ${we(l.frequency)}`:null})}else if(this.props.data.installments){let l=[...this.props.data.installments];l.reverse(),l.map(function(a,f){a>=500&&u.push({key:l.length-f,value:`${l.length-f}x de ${s(a)}`})})}this.setState({options:u,selectedOption:u.length?u[0].key:null})});q(this,"onCharge",async()=>{try{let s="1";this.props.data.subscription?s=this.props.data.subscription.installments!==1?this.state.selectedOption:"1":s=this.state.selectedOption,this.setState({makingCharge:!0});let u=this.props.paymentVersion=="kiwipay"?"/v2/charge/upsell":"/charge/upsell";(this.props.data.is_saas||this.props.isInternationalPayment)&&(u="/stripe/upsell");const a=await(await fetch(`https://checkout-api.kiwify.com.br${u}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({token:this.props.data.tokenParam,installments:s,link:this.props.data.linkId})})).json();if(nextUpsellURL){const{upsell_token:f}=a;let p=It(this.props.data.redirect,f,this.props.data.order_amount,this.state.modalContentType==="pix",this.props.paymentVersion);te(nextUpsellURL,p)}else this.props.data.redirect!=="undefined"&&this.props.data.redirect?te(`https://dashboard.kiwify.com.br/student/password/${this.props.data.redirect}`):this.props.changeModalType("payment-only")}catch{this.props.data.redirect!=="undefined"&&this.props.data.redirect?te(`https://dashboard.kiwify.com.br/student/password/${this.props.data.redirect}`):this.props.changeModalType("payment-only")}finally{}});this.state={options:[],makingCharge:!1,selectedOption:null}}componentWillMount(){this.setupOptions()}componentDidUpdate(){this.props.isLoadingCharge&&!this.state.makingCharge&&this.onCharge()}render(s,u){var a,f;const{isInternationalPayment:l}=s||{};return k("div",{children:[k("div",{className:"kw-mt-3 kw-text-center",children:k("div",{className:"kw-text-lg kw-leading-6 kw-font-sans kw-font-bold kw-text-gray-900",children:s.translate("credit_card.title")},void 0,!1,{fileName:Q,lineNumber:29,columnNumber:11},this)},void 0,!1,{fileName:Q,lineNumber:28,columnNumber:9},this),k("div",{id:"kiwify-upsell-modal-credit-card",className:"kw-flex kw-items-center kw-justify-center kw-flex-col",children:[k("div",{children:k("div",{className:"kw-text-[#a0aec0] kw-my-4 kw-font-sans kw-text-sm",children:s.translate("credit_card.subtitle")},void 0,!1,{fileName:Q,lineNumber:37,columnNumber:13},this)},void 0,!1,{fileName:Q,lineNumber:36,columnNumber:11},this),l?k("div",{className:"kw-py-2 kw-inline-block",id:"kiwify-upsell-modal-installments-container",children:((a=s==null?void 0:s.data)==null?void 0:a.price)&&k("div",{className:["kw-block","kw-min-w-[174px]","kw-w-auto","kw-mx-auto","kw-rounded-md","kw-px-3 kw-py-2","kw-text-base kw-leading-6","kw-border kw-border-solid kw-border-[#a0aec0]"].join(" "),children:s.formatCurrency((f=s==null?void 0:s.data)==null?void 0:f.price)},void 0,!1,{fileName:Q,lineNumber:47,columnNumber:17},this)},void 0,!1,{fileName:Q,lineNumber:42,columnNumber:13},this):k("div",{className:"kw-py-2 kw-inline-block",id:"kiwify-upsell-modal-installments-container",children:[k("select",{id:"kiwify-upsell-modal-installments",className:"kw-rounded-md kw-form-select-kiwi kw-block kw-w-auto kw-mx-auto kw-pl-3 kw-pr-10 kw-py-2 kw-text-base kw-leading-6 kw-focus:outline-none kw-min-w-[200px]",onChange:ra(this,"selectedOption","target.value"),children:u.options.map(p=>k("option",{value:p.key,children:p.value},p.key,!1,{fileName:Q,lineNumber:75,columnNumber:28},this))},void 0,!1,{fileName:Q,lineNumber:68,columnNumber:15},this),k("div",{children:this.setupFeeRenewalText(u.selectedOption)},void 0,!1,{fileName:Q,lineNumber:79,columnNumber:15},this)]},void 0,!0,{fileName:Q,lineNumber:64,columnNumber:13},this)]},void 0,!0,{fileName:Q,lineNumber:35,columnNumber:9},this)]},void 0,!0,{fileName:Q,lineNumber:27,columnNumber:7})}}var Zn={exports:{}};/*!
 * Pusher JavaScript Library v7.4.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(i,o){(function(u,l){i.exports=l()})(window,function(){return function(s){var u={};function l(a){if(u[a])return u[a].exports;var f=u[a]={i:a,l:!1,exports:{}};return s[a].call(f.exports,f,f.exports,l),f.l=!0,f.exports}return l.m=s,l.c=u,l.d=function(a,f,p){l.o(a,f)||Object.defineProperty(a,f,{enumerable:!0,get:p})},l.r=function(a){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},l.t=function(a,f){if(f&1&&(a=l(a)),f&8||f&4&&typeof a=="object"&&a&&a.__esModule)return a;var p=Object.create(null);if(l.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:a}),f&2&&typeof a!="string")for(var d in a)l.d(p,d,function(C){return a[C]}.bind(null,d));return p},l.n=function(a){var f=a&&a.__esModule?function(){return a.default}:function(){return a};return l.d(f,"a",f),f},l.o=function(a,f){return Object.prototype.hasOwnProperty.call(a,f)},l.p="",l(l.s=2)}([function(s,u,l){var a=this&&this.__extends||function(){var N=function(w,v){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,T){S.__proto__=T}||function(S,T){for(var E in T)T.hasOwnProperty(E)&&(S[E]=T[E])},N(w,v)};return function(w,v){N(w,v);function S(){this.constructor=w}w.prototype=v===null?Object.create(v):(S.prototype=v.prototype,new S)}}();Object.defineProperty(u,"__esModule",{value:!0});var f=256,p=function(){function N(w){w===void 0&&(w="="),this._paddingCharacter=w}return N.prototype.encodedLength=function(w){return this._paddingCharacter?(w+2)/3*4|0:(w*8+5)/6|0},N.prototype.encode=function(w){for(var v="",S=0;S<w.length-2;S+=3){var T=w[S]<<16|w[S+1]<<8|w[S+2];v+=this._encodeByte(T>>>3*6&63),v+=this._encodeByte(T>>>2*6&63),v+=this._encodeByte(T>>>1*6&63),v+=this._encodeByte(T>>>0*6&63)}var E=w.length-S;if(E>0){var T=w[S]<<16|(E===2?w[S+1]<<8:0);v+=this._encodeByte(T>>>3*6&63),v+=this._encodeByte(T>>>2*6&63),E===2?v+=this._encodeByte(T>>>1*6&63):v+=this._paddingCharacter||"",v+=this._paddingCharacter||""}return v},N.prototype.maxDecodedLength=function(w){return this._paddingCharacter?w/4*3|0:(w*6+7)/8|0},N.prototype.decodedLength=function(w){return this.maxDecodedLength(w.length-this._getPaddingLength(w))},N.prototype.decode=function(w){if(w.length===0)return new Uint8Array(0);for(var v=this._getPaddingLength(w),S=w.length-v,T=new Uint8Array(this.maxDecodedLength(S)),E=0,O=0,B=0,D=0,F=0,j=0,H=0;O<S-4;O+=4)D=this._decodeChar(w.charCodeAt(O+0)),F=this._decodeChar(w.charCodeAt(O+1)),j=this._decodeChar(w.charCodeAt(O+2)),H=this._decodeChar(w.charCodeAt(O+3)),T[E++]=D<<2|F>>>4,T[E++]=F<<4|j>>>2,T[E++]=j<<6|H,B|=D&f,B|=F&f,B|=j&f,B|=H&f;if(O<S-1&&(D=this._decodeChar(w.charCodeAt(O)),F=this._decodeChar(w.charCodeAt(O+1)),T[E++]=D<<2|F>>>4,B|=D&f,B|=F&f),O<S-2&&(j=this._decodeChar(w.charCodeAt(O+2)),T[E++]=F<<4|j>>>2,B|=j&f),O<S-3&&(H=this._decodeChar(w.charCodeAt(O+3)),T[E++]=j<<6|H,B|=H&f),B!==0)throw new Error("Base64Coder: incorrect characters for decoding");return T},N.prototype._encodeByte=function(w){var v=w;return v+=65,v+=25-w>>>8&0-65-26+97,v+=51-w>>>8&26-97-52+48,v+=61-w>>>8&52-48-62+43,v+=62-w>>>8&62-43-63+47,String.fromCharCode(v)},N.prototype._decodeChar=function(w){var v=f;return v+=(42-w&w-44)>>>8&-f+w-43+62,v+=(46-w&w-48)>>>8&-f+w-47+63,v+=(47-w&w-58)>>>8&-f+w-48+52,v+=(64-w&w-91)>>>8&-f+w-65+0,v+=(96-w&w-123)>>>8&-f+w-97+26,v},N.prototype._getPaddingLength=function(w){var v=0;if(this._paddingCharacter){for(var S=w.length-1;S>=0&&w[S]===this._paddingCharacter;S--)v++;if(w.length<4||v>2)throw new Error("Base64Coder: incorrect padding")}return v},N}();u.Coder=p;var d=new p;function C(N){return d.encode(N)}u.encode=C;function g(N){return d.decode(N)}u.decode=g;var P=function(N){a(w,N);function w(){return N!==null&&N.apply(this,arguments)||this}return w.prototype._encodeByte=function(v){var S=v;return S+=65,S+=25-v>>>8&0-65-26+97,S+=51-v>>>8&26-97-52+48,S+=61-v>>>8&52-48-62+45,S+=62-v>>>8&62-45-63+95,String.fromCharCode(S)},w.prototype._decodeChar=function(v){var S=f;return S+=(44-v&v-46)>>>8&-f+v-45+62,S+=(94-v&v-96)>>>8&-f+v-95+63,S+=(47-v&v-58)>>>8&-f+v-48+52,S+=(64-v&v-91)>>>8&-f+v-65+0,S+=(96-v&v-123)>>>8&-f+v-97+26,S},w}(p);u.URLSafeCoder=P;var m=new P;function y(N){return m.encode(N)}u.encodeURLSafe=y;function b(N){return m.decode(N)}u.decodeURLSafe=b,u.encodedLength=function(N){return d.encodedLength(N)},u.maxDecodedLength=function(N){return d.maxDecodedLength(N)},u.decodedLength=function(N){return d.decodedLength(N)}},function(s,u,l){Object.defineProperty(u,"__esModule",{value:!0});var a="utf8: invalid string",f="utf8: invalid source encoding";function p(g){for(var P=new Uint8Array(d(g)),m=0,y=0;y<g.length;y++){var b=g.charCodeAt(y);b<128?P[m++]=b:b<2048?(P[m++]=192|b>>6,P[m++]=128|b&63):b<55296?(P[m++]=224|b>>12,P[m++]=128|b>>6&63,P[m++]=128|b&63):(y++,b=(b&1023)<<10,b|=g.charCodeAt(y)&1023,b+=65536,P[m++]=240|b>>18,P[m++]=128|b>>12&63,P[m++]=128|b>>6&63,P[m++]=128|b&63)}return P}u.encode=p;function d(g){for(var P=0,m=0;m<g.length;m++){var y=g.charCodeAt(m);if(y<128)P+=1;else if(y<2048)P+=2;else if(y<55296)P+=3;else if(y<=57343){if(m>=g.length-1)throw new Error(a);m++,P+=4}else throw new Error(a)}return P}u.encodedLength=d;function C(g){for(var P=[],m=0;m<g.length;m++){var y=g[m];if(y&128){var b=void 0;if(y<224){if(m>=g.length)throw new Error(f);var N=g[++m];if((N&192)!==128)throw new Error(f);y=(y&31)<<6|N&63,b=128}else if(y<240){if(m>=g.length-1)throw new Error(f);var N=g[++m],w=g[++m];if((N&192)!==128||(w&192)!==128)throw new Error(f);y=(y&15)<<12|(N&63)<<6|w&63,b=2048}else if(y<248){if(m>=g.length-2)throw new Error(f);var N=g[++m],w=g[++m],v=g[++m];if((N&192)!==128||(w&192)!==128||(v&192)!==128)throw new Error(f);y=(y&15)<<18|(N&63)<<12|(w&63)<<6|v&63,b=65536}else throw new Error(f);if(y<b||y>=55296&&y<=57343)throw new Error(f);if(y>=65536){if(y>1114111)throw new Error(f);y-=65536,P.push(String.fromCharCode(55296|y>>10)),y=56320|y&1023}}P.push(String.fromCharCode(y))}return P.join("")}u.decode=C},function(s,u,l){s.exports=l(3).default},function(s,u,l){l.r(u);var a=function(){function t(e,n){this.lastId=0,this.prefix=e,this.name=n}return t.prototype.create=function(e){this.lastId++;var n=this.lastId,r=this.prefix+n,c=this.name+"["+n+"]",h=!1,_=function(){h||(e.apply(null,arguments),h=!0)};return this[n]=_,{number:n,id:r,name:c,callback:_}},t.prototype.remove=function(e){delete this[e.number]},t}(),f=new a("_pusher_script_","Pusher.ScriptReceivers"),p={VERSION:"7.4.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,cluster:"mt1",userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},d=p,C=function(){function t(e){this.options=e,this.receivers=e.receivers||f,this.loading={}}return t.prototype.load=function(e,n,r){var c=this;if(c.loading[e]&&c.loading[e].length>0)c.loading[e].push(r);else{c.loading[e]=[r];var h=M.createScriptRequest(c.getPath(e,n)),_=c.receivers.create(function(x){if(c.receivers.remove(_),c.loading[e]){var R=c.loading[e];delete c.loading[e];for(var A=function(X){X||h.cleanup()},U=0;U<R.length;U++)R[U](x,A)}});h.send(_)}},t.prototype.getRoot=function(e){var n,r=M.getDocument().location.protocol;return e&&e.useTLS||r==="https:"?n=this.options.cdn_https:n=this.options.cdn_http,n.replace(/\/*$/,"")+"/"+this.options.version},t.prototype.getPath=function(e,n){return this.getRoot(n)+"/"+e+this.options.suffix+".js"},t}(),g=C,P=new a("_pusher_dependencies","Pusher.DependenciesReceivers"),m=new g({cdn_http:d.cdn_http,cdn_https:d.cdn_https,version:d.VERSION,suffix:d.dependency_suffix,receivers:P}),y={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},b=function(t){var e="See:",n=y.urls[t];if(!n)return"";var r;return n.fullUrl?r=n.fullUrl:n.path&&(r=y.baseUrl+n.path),r?e+" "+r:""},N={buildLogSuffix:b},w;(function(t){t.UserAuthentication="user-authentication",t.ChannelAuthorization="channel-authorization"})(w||(w={}));var v=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var h in c)c.hasOwnProperty(h)&&(r[h]=c[h])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),S=function(t){v(e,t);function e(n){var r=this.constructor,c=t.call(this,n)||this;return Object.setPrototypeOf(c,r.prototype),c}return e}(Error),T=function(t){v(e,t);function e(n){var r=this.constructor,c=t.call(this,n)||this;return Object.setPrototypeOf(c,r.prototype),c}return e}(Error),E=function(t){v(e,t);function e(n){var r=this.constructor,c=t.call(this,n)||this;return Object.setPrototypeOf(c,r.prototype),c}return e}(Error),O=function(t){v(e,t);function e(n){var r=this.constructor,c=t.call(this,n)||this;return Object.setPrototypeOf(c,r.prototype),c}return e}(Error),B=function(t){v(e,t);function e(n){var r=this.constructor,c=t.call(this,n)||this;return Object.setPrototypeOf(c,r.prototype),c}return e}(Error),D=function(t){v(e,t);function e(n){var r=this.constructor,c=t.call(this,n)||this;return Object.setPrototypeOf(c,r.prototype),c}return e}(Error),F=function(t){v(e,t);function e(n){var r=this.constructor,c=t.call(this,n)||this;return Object.setPrototypeOf(c,r.prototype),c}return e}(Error),j=function(t){v(e,t);function e(n){var r=this.constructor,c=t.call(this,n)||this;return Object.setPrototypeOf(c,r.prototype),c}return e}(Error),H=function(t){v(e,t);function e(n,r){var c=this.constructor,h=t.call(this,r)||this;return h.status=n,Object.setPrototypeOf(h,c.prototype),h}return e}(Error),he=function(t,e,n,r,c){var h=M.createXHR();h.open("POST",n.endpoint,!0),h.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var _ in n.headers)h.setRequestHeader(_,n.headers[_]);return h.onreadystatechange=function(){if(h.readyState===4)if(h.status===200){var x=void 0,R=!1;try{x=JSON.parse(h.responseText),R=!0}catch{c(new H(200,"JSON returned from "+r.toString()+" endpoint was invalid, yet status code was 200. Data was: "+h.responseText),null)}R&&c(null,x)}else{var A="";switch(r){case w.UserAuthentication:A=N.buildLogSuffix("authenticationEndpoint");break;case w.ChannelAuthorization:A="Clients must be authenticated to join private or presence channels. "+N.buildLogSuffix("authorizationEndpoint");break}c(new H(h.status,"Unable to retrieve auth string from "+r.toString()+" endpoint - "+("received status: "+h.status+" from "+n.endpoint+". "+A)),null)}},h.send(e),h},xe=he;function Z(t){return rr(tr(t))}var Te=String.fromCharCode,De="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",er=function(t){var e=t.charCodeAt(0);return e<128?t:e<2048?Te(192|e>>>6)+Te(128|e&63):Te(224|e>>>12&15)+Te(128|e>>>6&63)+Te(128|e&63)},tr=function(t){return t.replace(/[^\x00-\x7F]/g,er)},nr=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0),r=[De.charAt(n>>>18),De.charAt(n>>>12&63),e>=2?"=":De.charAt(n>>>6&63),e>=1?"=":De.charAt(n&63)];return r.join("")},rr=window.btoa||function(t){return t.replace(/[\s\S]{1,3}/g,nr)},ir=function(){function t(e,n,r,c){var h=this;this.clear=n,this.timer=e(function(){h.timer&&(h.timer=c(h.timer))},r)}return t.prototype.isRunning=function(){return this.timer!==null},t.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},t}(),Mt=ir,Bt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var h in c)c.hasOwnProperty(h)&&(r[h]=c[h])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();function or(t){window.clearTimeout(t)}function sr(t){window.clearInterval(t)}var de=function(t){Bt(e,t);function e(n,r){return t.call(this,setTimeout,or,n,function(c){return r(),null})||this}return e}(Mt),ar=function(t){Bt(e,t);function e(n,r){return t.call(this,setInterval,sr,n,function(c){return r(),c})||this}return e}(Mt),cr={now:function(){return Date.now?Date.now():new Date().valueOf()},defer:function(t){return new de(0,t)},method:function(t){var e=Array.prototype.slice.call(arguments,1);return function(n){return n[t].apply(n,e.concat(arguments))}}},V=cr;function W(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var c=e[r];for(var h in c)c[h]&&c[h].constructor&&c[h].constructor===Object?t[h]=W(t[h]||{},c[h]):t[h]=c[h]}return t}function ur(){for(var t=["Pusher"],e=0;e<arguments.length;e++)typeof arguments[e]=="string"?t.push(arguments[e]):t.push(je(arguments[e]));return t.join(" : ")}function Ut(t,e){var n=Array.prototype.indexOf;if(t===null)return-1;if(n&&t.indexOf===n)return t.indexOf(e);for(var r=0,c=t.length;r<c;r++)if(t[r]===e)return r;return-1}function re(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function Dt(t){var e=[];return re(t,function(n,r){e.push(r)}),e}function lr(t){var e=[];return re(t,function(n){e.push(n)}),e}function Ee(t,e,n){for(var r=0;r<t.length;r++)e.call(n||window,t[r],r,t)}function jt(t,e){for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r,t,n));return n}function fr(t,e){var n={};return re(t,function(r,c){n[c]=e(r)}),n}function Ft(t,e){e=e||function(c){return!!c};for(var n=[],r=0;r<t.length;r++)e(t[r],r,t,n)&&n.push(t[r]);return n}function Ht(t,e){var n={};return re(t,function(r,c){(e&&e(r,c,t,n)||Boolean(r))&&(n[c]=r)}),n}function hr(t){var e=[];return re(t,function(n,r){e.push([r,n])}),e}function zt(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1}function dr(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0}function pr(t){return fr(t,function(e){return typeof e=="object"&&(e=je(e)),encodeURIComponent(Z(e.toString()))})}function mr(t){var e=Ht(t,function(r){return r!==void 0}),n=jt(hr(pr(e)),V.method("join","=")).join("&");return n}function gr(t){var e=[],n=[];return function r(c,h){var _,x,R;switch(typeof c){case"object":if(!c)return null;for(_=0;_<e.length;_+=1)if(e[_]===c)return{$ref:n[_]};if(e.push(c),n.push(h),Object.prototype.toString.apply(c)==="[object Array]")for(R=[],_=0;_<c.length;_+=1)R[_]=r(c[_],h+"["+_+"]");else{R={};for(x in c)Object.prototype.hasOwnProperty.call(c,x)&&(R[x]=r(c[x],h+"["+JSON.stringify(x)+"]"))}return R;case"number":case"string":case"boolean":return c}}(t,"$")}function je(t){try{return JSON.stringify(t)}catch{return JSON.stringify(gr(t))}}var yr=function(){function t(){this.globalLog=function(e){window.console&&window.console.log&&window.console.log(e)}}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.log(this.globalLog,e)},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.log(this.globalLogWarn,e)},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.log(this.globalLogError,e)},t.prototype.globalLogWarn=function(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)},t.prototype.globalLogError=function(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)},t.prototype.log=function(e){var n=ur.apply(this,arguments);if(pt.log)pt.log(n);else if(pt.logToConsole){var r=e.bind(this);r(n)}},t}(),z=new yr,vr=function(t,e,n,r,c){n.headers!==void 0&&z.warn("To send headers with the "+r.toString()+" request, you must use AJAX, rather than JSONP.");var h=t.nextAuthCallbackID.toString();t.nextAuthCallbackID++;var _=t.getDocument(),x=_.createElement("script");t.auth_callbacks[h]=function(U){c(null,U)};var R="Pusher.auth_callbacks['"+h+"']";x.src=n.endpoint+"?callback="+encodeURIComponent(R)+"&"+e;var A=_.getElementsByTagName("head")[0]||_.documentElement;A.insertBefore(x,A.firstChild)},wr=vr,_r=function(){function t(e){this.src=e}return t.prototype.send=function(e){var n=this,r="Error loading "+n.src;n.script=document.createElement("script"),n.script.id=e.id,n.script.src=n.src,n.script.type="text/javascript",n.script.charset="UTF-8",n.script.addEventListener?(n.script.onerror=function(){e.callback(r)},n.script.onload=function(){e.callback(null)}):n.script.onreadystatechange=function(){(n.script.readyState==="loaded"||n.script.readyState==="complete")&&e.callback(null)},n.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(n.errorScript=document.createElement("script"),n.errorScript.id=e.id+"_error",n.errorScript.text=e.name+"('"+r+"');",n.script.async=n.errorScript.async=!1):n.script.async=!0;var c=document.getElementsByTagName("head")[0];c.insertBefore(n.script,c.firstChild),n.errorScript&&c.insertBefore(n.errorScript,n.script.nextSibling)},t.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},t}(),br=_r,kr=function(){function t(e,n){this.url=e,this.data=n}return t.prototype.send=function(e){if(!this.request){var n=mr(this.data),r=this.url+"/"+e.number+"?"+n;this.request=M.createScriptRequest(r),this.request.send(e)}},t.prototype.cleanup=function(){this.request&&this.request.cleanup()},t}(),Nr=kr,Cr=function(t,e){return function(n,r){var c="http"+(e?"s":"")+"://",h=c+(t.host||t.options.host)+t.options.path,_=M.createJSONPRequest(h,n),x=M.ScriptReceivers.create(function(R,A){f.remove(x),_.cleanup(),A&&A.host&&(t.host=A.host),r&&r(R,A)});_.send(x)}},Sr={name:"jsonp",getAgent:Cr},xr=Sr;function it(t,e,n){var r=t+(e.useTLS?"s":""),c=e.useTLS?e.hostTLS:e.hostNonTLS;return r+"://"+c+n}function ot(t,e){var n="/app/"+t,r="?protocol="+d.PROTOCOL+"&client=js&version="+d.VERSION+(e?"&"+e:"");return n+r}var Tr={getInitial:function(t,e){var n=(e.httpPath||"")+ot(t,"flash=false");return it("ws",e,n)}},Er={getInitial:function(t,e){var n=(e.httpPath||"/pusher")+ot(t);return it("http",e,n)}},Pr={getInitial:function(t,e){return it("http",e,e.httpPath||"/pusher")},getPath:function(t,e){return ot(t)}},Ar=function(){function t(){this._callbacks={}}return t.prototype.get=function(e){return this._callbacks[st(e)]},t.prototype.add=function(e,n,r){var c=st(e);this._callbacks[c]=this._callbacks[c]||[],this._callbacks[c].push({fn:n,context:r})},t.prototype.remove=function(e,n,r){if(!e&&!n&&!r){this._callbacks={};return}var c=e?[st(e)]:Dt(this._callbacks);n||r?this.removeCallback(c,n,r):this.removeAllCallbacks(c)},t.prototype.removeCallback=function(e,n,r){Ee(e,function(c){this._callbacks[c]=Ft(this._callbacks[c]||[],function(h){return n&&n!==h.fn||r&&r!==h.context}),this._callbacks[c].length===0&&delete this._callbacks[c]},this)},t.prototype.removeAllCallbacks=function(e){Ee(e,function(n){delete this._callbacks[n]},this)},t}(),Lr=Ar;function st(t){return"_"+t}var Rr=function(){function t(e){this.callbacks=new Lr,this.global_callbacks=[],this.failThrough=e}return t.prototype.bind=function(e,n,r){return this.callbacks.add(e,n,r),this},t.prototype.bind_global=function(e){return this.global_callbacks.push(e),this},t.prototype.unbind=function(e,n,r){return this.callbacks.remove(e,n,r),this},t.prototype.unbind_global=function(e){return e?(this.global_callbacks=Ft(this.global_callbacks||[],function(n){return n!==e}),this):(this.global_callbacks=[],this)},t.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},t.prototype.emit=function(e,n,r){for(var c=0;c<this.global_callbacks.length;c++)this.global_callbacks[c](e,n);var h=this.callbacks.get(e),_=[];if(r?_.push(n,r):n&&_.push(n),h&&h.length>0)for(var c=0;c<h.length;c++)h[c].fn.apply(h[c].context||window,_);else this.failThrough&&this.failThrough(e,n);return this},t}(),se=Rr,Or=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var h in c)c.hasOwnProperty(h)&&(r[h]=c[h])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ir=function(t){Or(e,t);function e(n,r,c,h,_){var x=t.call(this)||this;return x.initialize=M.transportConnectionInitializer,x.hooks=n,x.name=r,x.priority=c,x.key=h,x.options=_,x.state="new",x.timeline=_.timeline,x.activityTimeout=_.activityTimeout,x.id=x.timeline.generateUniqueID(),x}return e.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},e.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},e.prototype.connect=function(){var n=this;if(this.socket||this.state!=="initialized")return!1;var r=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(r,this.options)}catch(c){return V.defer(function(){n.onError(c),n.changeState("closed")}),!1}return this.bindListeners(),z.debug("Connecting",{transport:this.name,url:r}),this.changeState("connecting"),!0},e.prototype.close=function(){return this.socket?(this.socket.close(),!0):!1},e.prototype.send=function(n){var r=this;return this.state==="open"?(V.defer(function(){r.socket&&r.socket.send(n)}),!0):!1},e.prototype.ping=function(){this.state==="open"&&this.supportsPing()&&this.socket.ping()},e.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},e.prototype.onError=function(n){this.emit("error",{type:"WebSocketError",error:n}),this.timeline.error(this.buildTimelineMessage({error:n.toString()}))},e.prototype.onClose=function(n){n?this.changeState("closed",{code:n.code,reason:n.reason,wasClean:n.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},e.prototype.onMessage=function(n){this.emit("message",n)},e.prototype.onActivity=function(){this.emit("activity")},e.prototype.bindListeners=function(){var n=this;this.socket.onopen=function(){n.onOpen()},this.socket.onerror=function(r){n.onError(r)},this.socket.onclose=function(r){n.onClose(r)},this.socket.onmessage=function(r){n.onMessage(r)},this.supportsPing()&&(this.socket.onactivity=function(){n.onActivity()})},e.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},e.prototype.changeState=function(n,r){this.state=n,this.timeline.info(this.buildTimelineMessage({state:n,params:r})),this.emit(n,r)},e.prototype.buildTimelineMessage=function(n){return W({cid:this.id},n)},e}(se),Mr=Ir,Br=function(){function t(e){this.hooks=e}return t.prototype.isSupported=function(e){return this.hooks.isSupported(e)},t.prototype.createConnection=function(e,n,r,c){return new Mr(this.hooks,e,n,r,c)},t}(),ye=Br,Ur=new ye({urls:Tr,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(M.getWebSocketAPI())},isSupported:function(){return Boolean(M.getWebSocketAPI())},getSocket:function(t){return M.createWebSocket(t)}}),qt={urls:Er,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},$t=W({getSocket:function(t){return M.HTTPFactory.createStreamingSocket(t)}},qt),Vt=W({getSocket:function(t){return M.HTTPFactory.createPollingSocket(t)}},qt),Jt={isSupported:function(){return M.isXHRSupported()}},Dr=new ye(W({},$t,Jt)),jr=new ye(W({},Vt,Jt)),Fr={ws:Ur,xhr_streaming:Dr,xhr_polling:jr},Fe=Fr,Hr=new ye({file:"sockjs",urls:Pr,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(t,e){return new window.SockJS(t,null,{js_path:m.getPath("sockjs",{useTLS:e.useTLS}),ignore_null_origin:e.ignoreNullOrigin})},beforeOpen:function(t,e){t.send(JSON.stringify({path:e}))}}),Xt={isSupported:function(t){var e=M.isXDRSupported(t.useTLS);return e}},zr=new ye(W({},$t,Xt)),qr=new ye(W({},Vt,Xt));Fe.xdr_streaming=zr,Fe.xdr_polling=qr,Fe.sockjs=Hr;var $r=Fe,Vr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var h in c)c.hasOwnProperty(h)&&(r[h]=c[h])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jr=function(t){Vr(e,t);function e(){var n=t.call(this)||this,r=n;return window.addEventListener!==void 0&&(window.addEventListener("online",function(){r.emit("online")},!1),window.addEventListener("offline",function(){r.emit("offline")},!1)),n}return e.prototype.isOnline=function(){return window.navigator.onLine===void 0?!0:window.navigator.onLine},e}(se),Xr=new Jr,Wr=function(){function t(e,n,r){this.manager=e,this.transport=n,this.minPingDelay=r.minPingDelay,this.maxPingDelay=r.maxPingDelay,this.pingDelay=void 0}return t.prototype.createConnection=function(e,n,r,c){var h=this;c=W({},c,{activityTimeout:this.pingDelay});var _=this.transport.createConnection(e,n,r,c),x=null,R=function(){_.unbind("open",R),_.bind("closed",A),x=V.now()},A=function(U){if(_.unbind("closed",A),U.code===1002||U.code===1003)h.manager.reportDeath();else if(!U.wasClean&&x){var X=V.now()-x;X<2*h.maxPingDelay&&(h.manager.reportDeath(),h.pingDelay=Math.max(X/2,h.minPingDelay))}};return _.bind("open",R),_},t.prototype.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},t}(),Qr=Wr,Wt={decodeMessage:function(t){try{var e=JSON.parse(t.data),n=e.data;if(typeof n=="string")try{n=JSON.parse(e.data)}catch{}var r={event:e.event,channel:e.channel,data:n};return e.user_id&&(r.user_id=e.user_id),r}catch(c){throw{type:"MessageParseError",error:c,data:t.data}}},encodeMessage:function(t){return JSON.stringify(t)},processHandshake:function(t){var e=Wt.decodeMessage(t);if(e.event==="pusher:connection_established"){if(!e.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:e.data.socket_id,activityTimeout:e.data.activity_timeout*1e3}}else{if(e.event==="pusher:error")return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"}},getCloseAction:function(t){return t.code<4e3?t.code>=1002&&t.code<=1004?"backoff":null:t.code===4e3?"tls_only":t.code<4100?"refused":t.code<4200?"backoff":t.code<4300?"retry":"refused"},getCloseError:function(t){return t.code!==1e3&&t.code!==1001?{type:"PusherError",data:{code:t.code,message:t.reason||t.message}}:null}},pe=Wt,Yr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var h in c)c.hasOwnProperty(h)&&(r[h]=c[h])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kr=function(t){Yr(e,t);function e(n,r){var c=t.call(this)||this;return c.id=n,c.transport=r,c.activityTimeout=r.activityTimeout,c.bindListeners(),c}return e.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},e.prototype.send=function(n){return this.transport.send(n)},e.prototype.send_event=function(n,r,c){var h={event:n,data:r};return c&&(h.channel=c),z.debug("Event sent",h),this.send(pe.encodeMessage(h))},e.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},e.prototype.close=function(){this.transport.close()},e.prototype.bindListeners=function(){var n=this,r={message:function(h){var _;try{_=pe.decodeMessage(h)}catch(x){n.emit("error",{type:"MessageParseError",error:x,data:h.data})}if(_!==void 0){switch(z.debug("Event recd",_),_.event){case"pusher:error":n.emit("error",{type:"PusherError",data:_.data});break;case"pusher:ping":n.emit("ping");break;case"pusher:pong":n.emit("pong");break}n.emit("message",_)}},activity:function(){n.emit("activity")},error:function(h){n.emit("error",h)},closed:function(h){c(),h&&h.code&&n.handleCloseEvent(h),n.transport=null,n.emit("closed")}},c=function(){re(r,function(h,_){n.transport.unbind(_,h)})};re(r,function(h,_){n.transport.bind(_,h)})},e.prototype.handleCloseEvent=function(n){var r=pe.getCloseAction(n),c=pe.getCloseError(n);c&&this.emit("error",c),r&&this.emit(r,{action:r,error:c})},e}(se),Gr=Kr,Zr=function(){function t(e,n){this.transport=e,this.callback=n,this.bindListeners()}return t.prototype.close=function(){this.unbindListeners(),this.transport.close()},t.prototype.bindListeners=function(){var e=this;this.onMessage=function(n){e.unbindListeners();var r;try{r=pe.processHandshake(n)}catch(c){e.finish("error",{error:c}),e.transport.close();return}r.action==="connected"?e.finish("connected",{connection:new Gr(r.id,e.transport),activityTimeout:r.activityTimeout}):(e.finish(r.action,{error:r.error}),e.transport.close())},this.onClosed=function(n){e.unbindListeners();var r=pe.getCloseAction(n)||"backoff",c=pe.getCloseError(n);e.finish(r,{error:c})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},t.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},t.prototype.finish=function(e,n){this.callback(W({transport:this.transport,action:e},n))},t}(),ei=Zr,ti=function(){function t(e,n){this.timeline=e,this.options=n||{}}return t.prototype.send=function(e,n){this.timeline.isEmpty()||this.timeline.send(M.TimelineTransport.getAgent(this,e),n)},t}(),ni=ti,ri=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var h in c)c.hasOwnProperty(h)&&(r[h]=c[h])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ii=function(t){ri(e,t);function e(n,r){var c=t.call(this,function(h,_){z.debug("No callbacks on "+n+" for "+h)})||this;return c.name=n,c.pusher=r,c.subscribed=!1,c.subscriptionPending=!1,c.subscriptionCancelled=!1,c}return e.prototype.authorize=function(n,r){return r(null,{auth:""})},e.prototype.trigger=function(n,r){if(n.indexOf("client-")!==0)throw new S("Event '"+n+"' does not start with 'client-'");if(!this.subscribed){var c=N.buildLogSuffix("triggeringClientEvents");z.warn("Client event triggered before channel 'subscription_succeeded' event . "+c)}return this.pusher.send_event(n,r,this.name)},e.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},e.prototype.handleEvent=function(n){var r=n.event,c=n.data;if(r==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(n);else if(r==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(n);else if(r.indexOf("pusher_internal:")!==0){var h={};this.emit(r,c,h)}},e.prototype.handleSubscriptionSucceededEvent=function(n){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",n.data)},e.prototype.handleSubscriptionCountEvent=function(n){n.data.subscription_count&&(this.subscriptionCount=n.data.subscription_count),this.emit("pusher:subscription_count",n.data)},e.prototype.subscribe=function(){var n=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(r,c){r?(n.subscriptionPending=!1,z.error(r.toString()),n.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:r.message},r instanceof H?{status:r.status}:{}))):n.pusher.send_event("pusher:subscribe",{auth:c.auth,channel_data:c.channel_data,channel:n.name})}))},e.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},e.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},e.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},e}(se),at=ii,oi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var h in c)c.hasOwnProperty(h)&&(r[h]=c[h])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),si=function(t){oi(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.authorize=function(n,r){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:n},r)},e}(at),ct=si,ai=function(){function t(){this.reset()}return t.prototype.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},t.prototype.each=function(e){var n=this;re(this.members,function(r,c){e(n.get(c))})},t.prototype.setMyID=function(e){this.myID=e},t.prototype.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},t.prototype.addMember=function(e){return this.get(e.user_id)===null&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},t.prototype.removeMember=function(e){var n=this.get(e.user_id);return n&&(delete this.members[e.user_id],this.count--),n},t.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},t}(),ci=ai,ui=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var h in c)c.hasOwnProperty(h)&&(r[h]=c[h])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),li=function(t,e,n,r){return new(n||(n=Promise))(function(c,h){function _(A){try{R(r.next(A))}catch(U){h(U)}}function x(A){try{R(r.throw(A))}catch(U){h(U)}}function R(A){A.done?c(A.value):new n(function(U){U(A.value)}).then(_,x)}R((r=r.apply(t,e||[])).next())})},fi=function(t,e){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},r,c,h,_;return _={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function x(A){return function(U){return R([A,U])}}function R(A){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,c&&(h=A[0]&2?c.return:A[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,A[1])).done)return h;switch(c=0,h&&(A=[A[0]&2,h.value]),A[0]){case 0:case 1:h=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,c=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!h||A[1]>h[0]&&A[1]<h[3])){n.label=A[1];break}if(A[0]===6&&n.label<h[1]){n.label=h[1],h=A;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(A);break}h[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(t,n)}catch(U){A=[6,U],c=0}finally{r=h=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},hi=function(t){ui(e,t);function e(n,r){var c=t.call(this,n,r)||this;return c.members=new ci,c}return e.prototype.authorize=function(n,r){var c=this;t.prototype.authorize.call(this,n,function(h,_){return li(c,void 0,void 0,function(){var x,R;return fi(this,function(A){switch(A.label){case 0:return h?[3,3]:(_=_,_.channel_data==null?[3,1]:(x=JSON.parse(_.channel_data),this.members.setMyID(x.user_id),[3,3]));case 1:return[4,this.pusher.user.signinDonePromise];case 2:if(A.sent(),this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else return R=N.buildLogSuffix("authorizationEndpoint"),z.error("Invalid auth response for channel '"+this.name+"', "+("expected 'channel_data' field. "+R+", ")+"or the user should be signed in."),r("Invalid auth response"),[2];A.label=3;case 3:return r(h,_),[2]}})})})},e.prototype.handleEvent=function(n){var r=n.event;if(r.indexOf("pusher_internal:")===0)this.handleInternalEvent(n);else{var c=n.data,h={};n.user_id&&(h.user_id=n.user_id),this.emit(r,c,h)}},e.prototype.handleInternalEvent=function(n){var r=n.event,c=n.data;switch(r){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(n);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(n);break;case"pusher_internal:member_added":var h=this.members.addMember(c);this.emit("pusher:member_added",h);break;case"pusher_internal:member_removed":var _=this.members.removeMember(c);_&&this.emit("pusher:member_removed",_);break}},e.prototype.handleSubscriptionSucceededEvent=function(n){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(n.data),this.emit("pusher:subscription_succeeded",this.members))},e.prototype.disconnect=function(){this.members.reset(),t.prototype.disconnect.call(this)},e}(ct),di=hi,pi=l(1),ut=l(0),mi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var h in c)c.hasOwnProperty(h)&&(r[h]=c[h])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gi=function(t){mi(e,t);function e(n,r,c){var h=t.call(this,n,r)||this;return h.key=null,h.nacl=c,h}return e.prototype.authorize=function(n,r){var c=this;t.prototype.authorize.call(this,n,function(h,_){if(h){r(h,_);return}var x=_.shared_secret;if(!x){r(new Error("No shared_secret key in auth payload for encrypted channel: "+c.name),null);return}c.key=Object(ut.decode)(x),delete _.shared_secret,r(null,_)})},e.prototype.trigger=function(n,r){throw new D("Client events are not currently supported for encrypted channels")},e.prototype.handleEvent=function(n){var r=n.event,c=n.data;if(r.indexOf("pusher_internal:")===0||r.indexOf("pusher:")===0){t.prototype.handleEvent.call(this,n);return}this.handleEncryptedEvent(r,c)},e.prototype.handleEncryptedEvent=function(n,r){var c=this;if(!this.key){z.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!r.ciphertext||!r.nonce){z.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+r);return}var h=Object(ut.decode)(r.ciphertext);if(h.length<this.nacl.secretbox.overheadLength){z.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+h.length);return}var _=Object(ut.decode)(r.nonce);if(_.length<this.nacl.secretbox.nonceLength){z.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+_.length);return}var x=this.nacl.secretbox.open(h,_,this.key);if(x===null){z.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,function(R,A){if(R){z.error("Failed to make a request to the authEndpoint: "+A+". Unable to fetch new key, so dropping encrypted event");return}if(x=c.nacl.secretbox.open(h,_,c.key),x===null){z.error("Failed to decrypt event with new key. Dropping encrypted event");return}c.emit(n,c.getDataToEmit(x))});return}this.emit(n,this.getDataToEmit(x))},e.prototype.getDataToEmit=function(n){var r=Object(pi.decode)(n);try{return JSON.parse(r)}catch{return r}},e}(ct),yi=gi,vi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var h in c)c.hasOwnProperty(h)&&(r[h]=c[h])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wi=function(t){vi(e,t);function e(n,r){var c=t.call(this)||this;c.state="initialized",c.connection=null,c.key=n,c.options=r,c.timeline=c.options.timeline,c.usingTLS=c.options.useTLS,c.errorCallbacks=c.buildErrorCallbacks(),c.connectionCallbacks=c.buildConnectionCallbacks(c.errorCallbacks),c.handshakeCallbacks=c.buildHandshakeCallbacks(c.errorCallbacks);var h=M.getNetwork();return h.bind("online",function(){c.timeline.info({netinfo:"online"}),(c.state==="connecting"||c.state==="unavailable")&&c.retryIn(0)}),h.bind("offline",function(){c.timeline.info({netinfo:"offline"}),c.connection&&c.sendActivityCheck()}),c.updateStrategy(),c}return e.prototype.connect=function(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},e.prototype.send=function(n){return this.connection?this.connection.send(n):!1},e.prototype.send_event=function(n,r,c){return this.connection?this.connection.send_event(n,r,c):!1},e.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},e.prototype.isUsingTLS=function(){return this.usingTLS},e.prototype.startConnecting=function(){var n=this,r=function(c,h){c?n.runner=n.strategy.connect(0,r):h.action==="error"?(n.emit("error",{type:"HandshakeError",error:h.error}),n.timeline.error({handshakeError:h.error})):(n.abortConnecting(),n.handshakeCallbacks[h.action](h))};this.runner=this.strategy.connect(0,r)},e.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},e.prototype.disconnectInternally=function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var n=this.abandonConnection();n.close()}},e.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},e.prototype.retryIn=function(n){var r=this;this.timeline.info({action:"retry",delay:n}),n>0&&this.emit("connecting_in",Math.round(n/1e3)),this.retryTimer=new de(n||0,function(){r.disconnectInternally(),r.connect()})},e.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},e.prototype.setUnavailableTimer=function(){var n=this;this.unavailableTimer=new de(this.options.unavailableTimeout,function(){n.updateState("unavailable")})},e.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},e.prototype.sendActivityCheck=function(){var n=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new de(this.options.pongTimeout,function(){n.timeline.error({pong_timed_out:n.options.pongTimeout}),n.retryIn(0)})},e.prototype.resetActivityCheck=function(){var n=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new de(this.activityTimeout,function(){n.sendActivityCheck()}))},e.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},e.prototype.buildConnectionCallbacks=function(n){var r=this;return W({},n,{message:function(c){r.resetActivityCheck(),r.emit("message",c)},ping:function(){r.send_event("pusher:pong",{})},activity:function(){r.resetActivityCheck()},error:function(c){r.emit("error",c)},closed:function(){r.abandonConnection(),r.shouldRetry()&&r.retryIn(1e3)}})},e.prototype.buildHandshakeCallbacks=function(n){var r=this;return W({},n,{connected:function(c){r.activityTimeout=Math.min(r.options.activityTimeout,c.activityTimeout,c.connection.activityTimeout||1/0),r.clearUnavailableTimer(),r.setConnection(c.connection),r.socket_id=r.connection.id,r.updateState("connected",{socket_id:r.socket_id})}})},e.prototype.buildErrorCallbacks=function(){var n=this,r=function(c){return function(h){h.error&&n.emit("error",{type:"WebSocketError",error:h.error}),c(h)}};return{tls_only:r(function(){n.usingTLS=!0,n.updateStrategy(),n.retryIn(0)}),refused:r(function(){n.disconnect()}),backoff:r(function(){n.retryIn(1e3)}),retry:r(function(){n.retryIn(0)})}},e.prototype.setConnection=function(n){this.connection=n;for(var r in this.connectionCallbacks)this.connection.bind(r,this.connectionCallbacks[r]);this.resetActivityCheck()},e.prototype.abandonConnection=function(){if(!!this.connection){this.stopActivityCheck();for(var n in this.connectionCallbacks)this.connection.unbind(n,this.connectionCallbacks[n]);var r=this.connection;return this.connection=null,r}},e.prototype.updateState=function(n,r){var c=this.state;if(this.state=n,c!==n){var h=n;h==="connected"&&(h+=" with new socket ID "+r.socket_id),z.debug("State changed",c+" -> "+h),this.timeline.info({state:n,params:r}),this.emit("state_change",{previous:c,current:n}),this.emit(n,r)}},e.prototype.shouldRetry=function(){return this.state==="connecting"||this.state==="connected"},e}(se),_i=wi,bi=function(){function t(){this.channels={}}return t.prototype.add=function(e,n){return this.channels[e]||(this.channels[e]=Ni(e,n)),this.channels[e]},t.prototype.all=function(){return lr(this.channels)},t.prototype.find=function(e){return this.channels[e]},t.prototype.remove=function(e){var n=this.channels[e];return delete this.channels[e],n},t.prototype.disconnect=function(){re(this.channels,function(e){e.disconnect()})},t}(),ki=bi;function Ni(t,e){if(t.indexOf("private-encrypted-")===0){if(e.config.nacl)return ie.createEncryptedChannel(t,e,e.config.nacl);var n="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",r=N.buildLogSuffix("encryptedChannelSupport");throw new D(n+". "+r)}else{if(t.indexOf("private-")===0)return ie.createPrivateChannel(t,e);if(t.indexOf("presence-")===0)return ie.createPresenceChannel(t,e);if(t.indexOf("#")===0)throw new T('Cannot create a channel with name "'+t+'".');return ie.createChannel(t,e)}}var Ci={createChannels:function(){return new ki},createConnectionManager:function(t,e){return new _i(t,e)},createChannel:function(t,e){return new at(t,e)},createPrivateChannel:function(t,e){return new ct(t,e)},createPresenceChannel:function(t,e){return new di(t,e)},createEncryptedChannel:function(t,e,n){return new yi(t,e,n)},createTimelineSender:function(t,e){return new ni(t,e)},createHandshake:function(t,e){return new ei(t,e)},createAssistantToTheTransportManager:function(t,e,n){return new Qr(t,e,n)}},ie=Ci,Si=function(){function t(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}return t.prototype.getAssistant=function(e){return ie.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},t.prototype.isAlive=function(){return this.livesLeft>0},t.prototype.reportDeath=function(){this.livesLeft-=1},t}(),Qt=Si,xi=function(){function t(e,n){this.strategies=e,this.loop=Boolean(n.loop),this.failFast=Boolean(n.failFast),this.timeout=n.timeout,this.timeoutLimit=n.timeoutLimit}return t.prototype.isSupported=function(){return zt(this.strategies,V.method("isSupported"))},t.prototype.connect=function(e,n){var r=this,c=this.strategies,h=0,_=this.timeout,x=null,R=function(A,U){U?n(null,U):(h=h+1,r.loop&&(h=h%c.length),h<c.length?(_&&(_=_*2,r.timeoutLimit&&(_=Math.min(_,r.timeoutLimit))),x=r.tryStrategy(c[h],e,{timeout:_,failFast:r.failFast},R)):n(!0))};return x=this.tryStrategy(c[h],e,{timeout:_,failFast:this.failFast},R),{abort:function(){x.abort()},forceMinPriority:function(A){e=A,x&&x.forceMinPriority(A)}}},t.prototype.tryStrategy=function(e,n,r,c){var h=null,_=null;return r.timeout>0&&(h=new de(r.timeout,function(){_.abort(),c(!0)})),_=e.connect(n,function(x,R){x&&h&&h.isRunning()&&!r.failFast||(h&&h.ensureAborted(),c(x,R))}),{abort:function(){h&&h.ensureAborted(),_.abort()},forceMinPriority:function(x){_.forceMinPriority(x)}}},t}(),me=xi,Ti=function(){function t(e){this.strategies=e}return t.prototype.isSupported=function(){return zt(this.strategies,V.method("isSupported"))},t.prototype.connect=function(e,n){return Ei(this.strategies,e,function(r,c){return function(h,_){if(c[r].error=h,h){Pi(c)&&n(!0);return}Ee(c,function(x){x.forceMinPriority(_.transport.priority)}),n(null,_)}})},t}(),lt=Ti;function Ei(t,e,n){var r=jt(t,function(c,h,_,x){return c.connect(e,n(h,x))});return{abort:function(){Ee(r,Ai)},forceMinPriority:function(c){Ee(r,function(h){h.forceMinPriority(c)})}}}function Pi(t){return dr(t,function(e){return Boolean(e.error)})}function Ai(t){!t.error&&!t.aborted&&(t.abort(),t.aborted=!0)}var Li=function(){function t(e,n,r){this.strategy=e,this.transports=n,this.ttl=r.ttl||1800*1e3,this.usingTLS=r.useTLS,this.timeline=r.timeline}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(e,n){var r=this.usingTLS,c=Oi(r),h=[this.strategy];if(c&&c.timestamp+this.ttl>=V.now()){var _=this.transports[c.transport];_&&(this.timeline.info({cached:!0,transport:c.transport,latency:c.latency}),h.push(new me([_],{timeout:c.latency*2+1e3,failFast:!0})))}var x=V.now(),R=h.pop().connect(e,function A(U,X){U?(Yt(r),h.length>0?(x=V.now(),R=h.pop().connect(e,A)):n(U)):(Ii(r,X.transport.name,V.now()-x),n(null,X))});return{abort:function(){R.abort()},forceMinPriority:function(A){e=A,R&&R.forceMinPriority(A)}}},t}(),Ri=Li;function ft(t){return"pusherTransport"+(t?"TLS":"NonTLS")}function Oi(t){var e=M.getLocalStorage();if(e)try{var n=e[ft(t)];if(n)return JSON.parse(n)}catch{Yt(t)}return null}function Ii(t,e,n){var r=M.getLocalStorage();if(r)try{r[ft(t)]=je({timestamp:V.now(),transport:e,latency:n})}catch{}}function Yt(t){var e=M.getLocalStorage();if(e)try{delete e[ft(t)]}catch{}}var Mi=function(){function t(e,n){var r=n.delay;this.strategy=e,this.options={delay:r}}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(e,n){var r=this.strategy,c,h=new de(this.options.delay,function(){c=r.connect(e,n)});return{abort:function(){h.ensureAborted(),c&&c.abort()},forceMinPriority:function(_){e=_,c&&c.forceMinPriority(_)}}},t}(),He=Mi,Bi=function(){function t(e,n,r){this.test=e,this.trueBranch=n,this.falseBranch=r}return t.prototype.isSupported=function(){var e=this.test()?this.trueBranch:this.falseBranch;return e.isSupported()},t.prototype.connect=function(e,n){var r=this.test()?this.trueBranch:this.falseBranch;return r.connect(e,n)},t}(),Pe=Bi,Ui=function(){function t(e){this.strategy=e}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(e,n){var r=this.strategy.connect(e,function(c,h){h&&r.abort(),n(c,h)});return r},t}(),Di=Ui;function Ae(t){return function(){return t.isSupported()}}var ji=function(t,e,n){var r={};function c(ln,$o,Vo,Jo,Xo){var fn=n(t,ln,$o,Vo,Jo,Xo);return r[ln]=fn,fn}var h=Object.assign({},e,{hostNonTLS:t.wsHost+":"+t.wsPort,hostTLS:t.wsHost+":"+t.wssPort,httpPath:t.wsPath}),_=Object.assign({},h,{useTLS:!0}),x=Object.assign({},e,{hostNonTLS:t.httpHost+":"+t.httpPort,hostTLS:t.httpHost+":"+t.httpsPort,httpPath:t.httpPath}),R={loop:!0,timeout:15e3,timeoutLimit:6e4},A=new Qt({lives:2,minPingDelay:1e4,maxPingDelay:t.activityTimeout}),U=new Qt({lives:2,minPingDelay:1e4,maxPingDelay:t.activityTimeout}),X=c("ws","ws",3,h,A),ee=c("wss","ws",3,_,A),jo=c("sockjs","sockjs",1,x),rn=c("xhr_streaming","xhr_streaming",1,x,U),Fo=c("xdr_streaming","xdr_streaming",1,x,U),on=c("xhr_polling","xhr_polling",1,x),Ho=c("xdr_polling","xdr_polling",1,x),sn=new me([X],R),zo=new me([ee],R),qo=new me([jo],R),an=new me([new Pe(Ae(rn),rn,Fo)],R),cn=new me([new Pe(Ae(on),on,Ho)],R),un=new me([new Pe(Ae(an),new lt([an,new He(cn,{delay:4e3})]),cn)],R),mt=new Pe(Ae(un),un,qo),gt;return e.useTLS?gt=new lt([sn,new He(mt,{delay:2e3})]):gt=new lt([sn,new He(zo,{delay:2e3}),new He(mt,{delay:5e3})]),new Ri(new Di(new Pe(Ae(X),gt,mt)),r,{ttl:18e5,timeline:e.timeline,useTLS:e.useTLS})},Fi=ji,Hi=function(){var t=this;t.timeline.info(t.buildTimelineMessage({transport:t.name+(t.options.useTLS?"s":"")})),t.hooks.isInitialized()?t.changeState("initialized"):t.hooks.file?(t.changeState("initializing"),m.load(t.hooks.file,{useTLS:t.options.useTLS},function(e,n){t.hooks.isInitialized()?(t.changeState("initialized"),n(!0)):(e&&t.onError(e),t.onClose(),n(!1))})):t.onClose()},zi={getRequest:function(t){var e=new window.XDomainRequest;return e.ontimeout=function(){t.emit("error",new E),t.close()},e.onerror=function(n){t.emit("error",n),t.close()},e.onprogress=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText)},e.onload=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText),t.emit("finished",200),t.close()},e},abortRequest:function(t){t.ontimeout=t.onerror=t.onprogress=t.onload=null,t.abort()}},qi=zi,$i=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var h in c)c.hasOwnProperty(h)&&(r[h]=c[h])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vi=256*1024,Ji=function(t){$i(e,t);function e(n,r,c){var h=t.call(this)||this;return h.hooks=n,h.method=r,h.url=c,h}return e.prototype.start=function(n){var r=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){r.close()},M.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(n)},e.prototype.close=function(){this.unloader&&(M.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},e.prototype.onChunk=function(n,r){for(;;){var c=this.advanceBuffer(r);if(c)this.emit("chunk",{status:n,data:c});else break}this.isBufferTooLong(r)&&this.emit("buffer_too_long")},e.prototype.advanceBuffer=function(n){var r=n.slice(this.position),c=r.indexOf(`
`);return c!==-1?(this.position+=c+1,r.slice(0,c)):null},e.prototype.isBufferTooLong=function(n){return this.position===n.length&&n.length>Vi},e}(se),Xi=Ji,ht;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSED=3]="CLOSED"})(ht||(ht={}));var ge=ht,Wi=1,Qi=function(){function t(e,n){this.hooks=e,this.session=Gt(1e3)+"/"+Zi(8),this.location=Yi(n),this.readyState=ge.CONNECTING,this.openStream()}return t.prototype.send=function(e){return this.sendRaw(JSON.stringify([e]))},t.prototype.ping=function(){this.hooks.sendHeartbeat(this)},t.prototype.close=function(e,n){this.onClose(e,n,!0)},t.prototype.sendRaw=function(e){if(this.readyState===ge.OPEN)try{return M.createSocketRequest("POST",Kt(Ki(this.location,this.session))).start(e),!0}catch{return!1}else return!1},t.prototype.reconnect=function(){this.closeStream(),this.openStream()},t.prototype.onClose=function(e,n,r){this.closeStream(),this.readyState=ge.CLOSED,this.onclose&&this.onclose({code:e,reason:n,wasClean:r})},t.prototype.onChunk=function(e){if(e.status===200){this.readyState===ge.OPEN&&this.onActivity();var n,r=e.data.slice(0,1);switch(r){case"o":n=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(n);break;case"a":n=JSON.parse(e.data.slice(1)||"[]");for(var c=0;c<n.length;c++)this.onEvent(n[c]);break;case"m":n=JSON.parse(e.data.slice(1)||"null"),this.onEvent(n);break;case"h":this.hooks.onHeartbeat(this);break;case"c":n=JSON.parse(e.data.slice(1)||"[]"),this.onClose(n[0],n[1],!0);break}}},t.prototype.onOpen=function(e){this.readyState===ge.CONNECTING?(e&&e.hostname&&(this.location.base=Gi(this.location.base,e.hostname)),this.readyState=ge.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},t.prototype.onEvent=function(e){this.readyState===ge.OPEN&&this.onmessage&&this.onmessage({data:e})},t.prototype.onActivity=function(){this.onactivity&&this.onactivity()},t.prototype.onError=function(e){this.onerror&&this.onerror(e)},t.prototype.openStream=function(){var e=this;this.stream=M.createSocketRequest("POST",Kt(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(n){e.onChunk(n)}),this.stream.bind("finished",function(n){e.hooks.onFinished(e,n)}),this.stream.bind("buffer_too_long",function(){e.reconnect()});try{this.stream.start()}catch(n){V.defer(function(){e.onError(n),e.onClose(1006,"Could not start streaming",!1)})}},t.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},t}();function Yi(t){var e=/([^\?]*)\/*(\??.*)/.exec(t);return{base:e[1],queryString:e[2]}}function Ki(t,e){return t.base+"/"+e+"/xhr_send"}function Kt(t){var e=t.indexOf("?")===-1?"?":"&";return t+e+"t="+ +new Date+"&n="+Wi++}function Gi(t,e){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t);return n[1]+e+n[3]}function Gt(t){return Math.floor(Math.random()*t)}function Zi(t){for(var e=[],n=0;n<t;n++)e.push(Gt(32).toString(32));return e.join("")}var eo=Qi,to={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr_streaming"+t.queryString},onHeartbeat:function(t){t.sendRaw("[]")},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){t.onClose(1006,"Connection interrupted ("+e+")",!1)}},no=to,ro={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr"+t.queryString},onHeartbeat:function(){},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){e===200?t.reconnect():t.onClose(1006,"Connection interrupted ("+e+")",!1)}},io=ro,oo={getRequest:function(t){var e=M.getXHRAPI(),n=new e;return n.onreadystatechange=n.onprogress=function(){switch(n.readyState){case 3:n.responseText&&n.responseText.length>0&&t.onChunk(n.status,n.responseText);break;case 4:n.responseText&&n.responseText.length>0&&t.onChunk(n.status,n.responseText),t.emit("finished",n.status),t.close();break}},n},abortRequest:function(t){t.onreadystatechange=null,t.abort()}},so=oo,ao={createStreamingSocket:function(t){return this.createSocket(no,t)},createPollingSocket:function(t){return this.createSocket(io,t)},createSocket:function(t,e){return new eo(t,e)},createXHR:function(t,e){return this.createRequest(so,t,e)},createRequest:function(t,e,n){return new Xi(t,e,n)}},Zt=ao;Zt.createXDR=function(t,e){return this.createRequest(qi,t,e)};var co=Zt,uo={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:f,DependenciesReceivers:P,getDefaultStrategy:Fi,Transports:$r,transportConnectionInitializer:Hi,HTTPFactory:co,TimelineTransport:xr,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(t){var e=this;window.Pusher=t;var n=function(){e.onDocumentBody(t.ready)};window.JSON?n():m.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:xe,jsonp:wr}},onDocumentBody:function(t){var e=this;document.body?t():setTimeout(function(){e.onDocumentBody(t)},0)},createJSONPRequest:function(t,e){return new Nr(t,e)},createScriptRequest:function(t){return new br(t)},getLocalStorage:function(){try{return window.localStorage}catch{return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){var t=this.getXHRAPI();return new t},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return Xr},createWebSocket:function(t){var e=this.getWebSocketAPI();return new e(t)},createSocketRequest:function(t,e){if(this.isXHRSupported())return this.HTTPFactory.createXHR(t,e);if(this.isXDRSupported(e.indexOf("https:")===0))return this.HTTPFactory.createXDR(t,e);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var t=this.getXHRAPI();return Boolean(t)&&new t().withCredentials!==void 0},isXDRSupported:function(t){var e=t?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===e},addUnloadListener:function(t){window.addEventListener!==void 0?window.addEventListener("unload",t,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",t)},removeUnloadListener:function(t){window.addEventListener!==void 0?window.removeEventListener("unload",t,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",t)}},M=uo,dt;(function(t){t[t.ERROR=3]="ERROR",t[t.INFO=6]="INFO",t[t.DEBUG=7]="DEBUG"})(dt||(dt={}));var ze=dt,lo=function(){function t(e,n,r){this.key=e,this.session=n,this.events=[],this.options=r||{},this.sent=0,this.uniqueID=0}return t.prototype.log=function(e,n){e<=this.options.level&&(this.events.push(W({},n,{timestamp:V.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},t.prototype.error=function(e){this.log(ze.ERROR,e)},t.prototype.info=function(e){this.log(ze.INFO,e)},t.prototype.debug=function(e){this.log(ze.DEBUG,e)},t.prototype.isEmpty=function(){return this.events.length===0},t.prototype.send=function(e,n){var r=this,c=W({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(c,function(h,_){h||r.sent++,n&&n(h,_)}),!0},t.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},t}(),fo=lo,ho=function(){function t(e,n,r,c){this.name=e,this.priority=n,this.transport=r,this.options=c||{}}return t.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},t.prototype.connect=function(e,n){var r=this;if(this.isSupported()){if(this.priority<e)return en(new O,n)}else return en(new j,n);var c=!1,h=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),_=null,x=function(){h.unbind("initialized",x),h.connect()},R=function(){_=ie.createHandshake(h,function(ee){c=!0,X(),n(null,ee)})},A=function(ee){X(),n(ee)},U=function(){X();var ee;ee=je(h),n(new B(ee))},X=function(){h.unbind("initialized",x),h.unbind("open",R),h.unbind("error",A),h.unbind("closed",U)};return h.bind("initialized",x),h.bind("open",R),h.bind("error",A),h.bind("closed",U),h.initialize(),{abort:function(){c||(X(),_?_.close():h.close())},forceMinPriority:function(ee){c||r.priority<ee&&(_?_.close():h.close())}}},t}(),po=ho;function en(t,e){return V.defer(function(){e(t)}),{abort:function(){},forceMinPriority:function(){}}}var mo=M.Transports,go=function(t,e,n,r,c,h){var _=mo[n];if(!_)throw new F(n);var x=(!t.enabledTransports||Ut(t.enabledTransports,e)!==-1)&&(!t.disabledTransports||Ut(t.disabledTransports,e)===-1),R;return x?(c=Object.assign({ignoreNullOrigin:t.ignoreNullOrigin},c),R=new po(e,r,h?h.getAssistant(_):_,c)):R=yo,R},yo={isSupported:function(){return!1},connect:function(t,e){var n=V.defer(function(){e(new j)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},vo=function(t,e){var n="socket_id="+encodeURIComponent(t.socketId);for(var r in e.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(e.params[r]);return n},wo=function(t){if(typeof M.getAuthorizers()[t.transport]=="undefined")throw"'"+t.transport+"' is not a recognized auth transport";return function(e,n){var r=vo(e,t);M.getAuthorizers()[t.transport](M,r,t,w.UserAuthentication,n)}},_o=wo,bo=function(t,e){var n="socket_id="+encodeURIComponent(t.socketId);n+="&channel_name="+encodeURIComponent(t.channelName);for(var r in e.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(e.params[r]);return n},ko=function(t){if(typeof M.getAuthorizers()[t.transport]=="undefined")throw"'"+t.transport+"' is not a recognized auth transport";return function(e,n){var r=bo(e,t);M.getAuthorizers()[t.transport](M,r,t,w.ChannelAuthorization,n)}},No=ko,Co=function(t,e,n){var r={authTransport:e.transport,authEndpoint:e.endpoint,auth:{params:e.params,headers:e.headers}};return function(c,h){var _=t.channel(c.channelName),x=n(_,r);x.authorize(c.socketId,h)}},qe=function(){return qe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&(t[c]=e[c])}return t},qe.apply(this,arguments)};function So(t,e){var n={activityTimeout:t.activityTimeout||d.activityTimeout,cluster:t.cluster||d.cluster,httpPath:t.httpPath||d.httpPath,httpPort:t.httpPort||d.httpPort,httpsPort:t.httpsPort||d.httpsPort,pongTimeout:t.pongTimeout||d.pongTimeout,statsHost:t.statsHost||d.stats_host,unavailableTimeout:t.unavailableTimeout||d.unavailableTimeout,wsPath:t.wsPath||d.wsPath,wsPort:t.wsPort||d.wsPort,wssPort:t.wssPort||d.wssPort,enableStats:Po(t),httpHost:xo(t),useTLS:Eo(t),wsHost:To(t),userAuthenticator:Ao(t),channelAuthorizer:Ro(t,e)};return"disabledTransports"in t&&(n.disabledTransports=t.disabledTransports),"enabledTransports"in t&&(n.enabledTransports=t.enabledTransports),"ignoreNullOrigin"in t&&(n.ignoreNullOrigin=t.ignoreNullOrigin),"timelineParams"in t&&(n.timelineParams=t.timelineParams),"nacl"in t&&(n.nacl=t.nacl),n}function xo(t){return t.httpHost?t.httpHost:t.cluster?"sockjs-"+t.cluster+".pusher.com":d.httpHost}function To(t){return t.wsHost?t.wsHost:t.cluster?tn(t.cluster):tn(d.cluster)}function tn(t){return"ws-"+t+".pusher.com"}function Eo(t){return M.getProtocol()==="https:"?!0:t.forceTLS!==!1}function Po(t){return"enableStats"in t?t.enableStats:"disableStats"in t?!t.disableStats:!1}function Ao(t){var e=qe({},d.userAuthentication,t.userAuthentication);return"customHandler"in e&&e.customHandler!=null?e.customHandler:_o(e)}function Lo(t,e){var n;return"channelAuthorization"in t?n=qe({},d.channelAuthorization,t.channelAuthorization):(n={transport:t.authTransport||d.authTransport,endpoint:t.authEndpoint||d.authEndpoint},"auth"in t&&("params"in t.auth&&(n.params=t.auth.params),"headers"in t.auth&&(n.headers=t.auth.headers)),"authorizer"in t&&(n.customHandler=Co(e,n,t.authorizer))),n}function Ro(t,e){var n=Lo(t,e);return"customHandler"in n&&n.customHandler!=null?n.customHandler:No(n)}function Oo(){var t,e,n=new Promise(function(r,c){t=r,e=c});return{promise:n,resolve:t,reject:e}}var Io=Oo,Mo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var h in c)c.hasOwnProperty(h)&&(r[h]=c[h])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bo=function(t){Mo(e,t);function e(n){var r=t.call(this,function(c,h){z.debug("No callbacks on user for "+c)})||this;return r.signin_requested=!1,r.user_data=null,r.serverToUserChannel=null,r.signinDonePromise=null,r._signinDoneResolve=null,r._onAuthorize=function(c,h){if(c){z.warn("Error during signin: "+c),r._cleanup();return}r.pusher.send_event("pusher:signin",{auth:h.auth,user_data:h.user_data})},r.pusher=n,r.pusher.connection.bind("state_change",function(c){var h=c.previous,_=c.current;h!=="connected"&&_==="connected"&&r._signin(),h==="connected"&&_!=="connected"&&(r._cleanup(),r._newSigninPromiseIfNeeded())}),r.pusher.connection.bind("message",function(c){var h=c.event;h==="pusher:signin_success"&&r._onSigninSuccess(c.data),r.serverToUserChannel&&r.serverToUserChannel.name===c.channel&&r.serverToUserChannel.handleEvent(c)}),r}return e.prototype.signin=function(){this.signin_requested||(this.signin_requested=!0,this._signin())},e.prototype._signin=function(){!this.signin_requested||(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))},e.prototype._onSigninSuccess=function(n){try{this.user_data=JSON.parse(n.user_data)}catch{z.error("Failed parsing user data after signin: "+n.user_data),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){z.error("user_data doesn't contain an id. user_data: "+this.user_data),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()},e.prototype._subscribeChannels=function(){var n=this,r=function(c){c.subscriptionPending&&c.subscriptionCancelled?c.reinstateSubscription():!c.subscriptionPending&&n.pusher.connection.state==="connected"&&c.subscribe()};this.serverToUserChannel=new at("#server-to-user-"+this.user_data.id,this.pusher),this.serverToUserChannel.bind_global(function(c,h){c.indexOf("pusher_internal:")===0||c.indexOf("pusher:")===0||n.emit(c,h)}),r(this.serverToUserChannel)},e.prototype._cleanup=function(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()},e.prototype._newSigninPromiseIfNeeded=function(){if(!!this.signin_requested&&!(this.signinDonePromise&&!this.signinDonePromise.done)){var n=Io(),r=n.promise,c=n.resolve;r.done=!1;var h=function(){r.done=!0};r.then(h).catch(h),this.signinDonePromise=r,this._signinDoneResolve=c}},e}(se),Uo=Bo,nn=function(){function t(e,n){var r=this;if(Do(e),n=n||{},!n.cluster&&!(n.wsHost||n.httpHost)){var c=N.buildLogSuffix("javascriptQuickStart");z.warn("You should always specify a cluster when connecting. "+c)}"disableStats"in n&&z.warn("The disableStats option is deprecated in favor of enableStats"),this.key=e,this.config=So(n,this),this.channels=ie.createChannels(),this.global_emitter=new se,this.sessionID=Math.floor(Math.random()*1e9),this.timeline=new fo(this.key,this.sessionID,{cluster:this.config.cluster,features:t.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:ze.INFO,version:d.VERSION}),this.config.enableStats&&(this.timelineSender=ie.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+M.TimelineTransport.name}));var h=function(_){return M.getDefaultStrategy(r.config,_,go)};this.connection=ie.createConnectionManager(this.key,{getStrategy:h,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",function(){r.subscribeAll(),r.timelineSender&&r.timelineSender.send(r.connection.isUsingTLS())}),this.connection.bind("message",function(_){var x=_.event,R=x.indexOf("pusher_internal:")===0;if(_.channel){var A=r.channel(_.channel);A&&A.handleEvent(_)}R||r.global_emitter.emit(_.event,_.data)}),this.connection.bind("connecting",function(){r.channels.disconnect()}),this.connection.bind("disconnected",function(){r.channels.disconnect()}),this.connection.bind("error",function(_){z.warn(_)}),t.instances.push(this),this.timeline.info({instances:t.instances.length}),this.user=new Uo(this),t.isReady&&this.connect()}return t.ready=function(){t.isReady=!0;for(var e=0,n=t.instances.length;e<n;e++)t.instances[e].connect()},t.getClientFeatures=function(){return Dt(Ht({ws:M.Transports.ws},function(e){return e.isSupported({})}))},t.prototype.channel=function(e){return this.channels.find(e)},t.prototype.allChannels=function(){return this.channels.all()},t.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),n=this.timelineSender;this.timelineSenderTimer=new ar(6e4,function(){n.send(e)})}},t.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},t.prototype.bind=function(e,n,r){return this.global_emitter.bind(e,n,r),this},t.prototype.unbind=function(e,n,r){return this.global_emitter.unbind(e,n,r),this},t.prototype.bind_global=function(e){return this.global_emitter.bind_global(e),this},t.prototype.unbind_global=function(e){return this.global_emitter.unbind_global(e),this},t.prototype.unbind_all=function(e){return this.global_emitter.unbind_all(),this},t.prototype.subscribeAll=function(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},t.prototype.subscribe=function(e){var n=this.channels.add(e,this);return n.subscriptionPending&&n.subscriptionCancelled?n.reinstateSubscription():!n.subscriptionPending&&this.connection.state==="connected"&&n.subscribe(),n},t.prototype.unsubscribe=function(e){var n=this.channels.find(e);n&&n.subscriptionPending?n.cancelSubscription():(n=this.channels.remove(e),n&&n.subscribed&&n.unsubscribe())},t.prototype.send_event=function(e,n,r){return this.connection.send_event(e,n,r)},t.prototype.shouldUseTLS=function(){return this.config.useTLS},t.prototype.signin=function(){this.user.signin()},t.instances=[],t.isReady=!1,t.logToConsole=!1,t.Runtime=M,t.ScriptReceivers=M.ScriptReceivers,t.DependenciesReceivers=M.DependenciesReceivers,t.auth_callbacks=M.auth_callbacks,t}(),pt=u.default=nn;function Do(t){if(t==null)throw"You must pass your app key when you instantiate Pusher."}M.setup(nn)}])})})(Zn);var oa=us(Zn.exports),L="/Users/udi/kiwify/upsell/src/components/PIXForm.jsx";const sa=new oa("18fb54a8675678498476",{cluster:"us2",authEndpoint:"https://checkout-api.kiwify.com.br/pusher/auth"});class aa extends Y{constructor(){super();q(this,"changeViewToQR",()=>{clearInterval(this.state.timerFunc),this.setState({view:"qr"})});q(this,"changeViewToHelp",()=>{this.startTimer(120),this.setState({view:"help"})});q(this,"copyPixQR",()=>(Zs(this.props.pixResponse.pix_qrcode),this.setState({pixCodeCopied:!0}),setTimeout(()=>{this.setState({pixCodeCopied:!1})},2e3),!0));q(this,"toggleQRMobile",()=>{this.setState({showQRMobile:!this.state.showQRMobile})});q(this,"startTimer",(s,u)=>{var l=s,a,f;let p=this;this.setState({time:"02:00"});var d=setInterval(function(){a=parseInt(l/60,10),f=parseInt(l%60,10),a=a<10?"0"+a:a,f=f<10?"0"+f:f,p.setState({time:a+":"+f}),--l<0&&(l=s)},1e3);this.setState({timerFunc:d})});this.state={pixCodeCopied:!1,response:{},isProcessing:!1,showQRMobile:!1,view:"qr",time:"02:00",timerFunc:null}}componentWillMount(){let s=`private-pix-${this.props.pixResponse.order?this.props.pixResponse.order:this.props.pixResponse.order_ref_id}`;const u=sa.subscribe(s);u.bind("processing",l=>{this.setState({isProcessing:!0})}),u.bind("status-changed",async l=>{if(l.status==="paid")if(nextUpsellURL){const{upsell_token:a}=l;let f=It(this.props.data.redirect,a,this.props.data.order_amount,!0,this.props.paymentVersion);te(nextUpsellURL,f)}else this.props.data.redirect!=="undefined"&&this.props.data.redirect?te(`https://dashboard.kiwify.com.br/student/password/${this.props.data.redirect}`):this.props.changeModalType("payment-only");else this.props.data.redirect!=="undefined"&&this.props.data.redirect?te(`https://dashboard.kiwify.com.br/student/password/${this.props.data.redirect}`):this.changeModalType("payment-only")})}render(s,u){return k("div",{children:k("div",{children:[u.isProcessing?k("div",{class:"kw-absolute kw-z-50 kw-bg-black kw-bg-opacity-25 kw-h-full kw-rounded-md kw-w-full kw-left-0 kw-top-0 kw-flex kw-items-center kw-flex-col kw-justify-center",children:k("div",{class:"kw-w-8/12 kw-py-8 kw-shadow-lg kw-bg-white sm:kw-rounded-lg kw-rounded-md kw-flex kw-flex-col kw-items-center kw-justify-center",children:[k("svg",{className:"kw-animate-spin kw-my-4 kw-h-16 kw-w-16 kw-text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[k("circle",{className:"kw-opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},void 0,!1,{fileName:L,lineNumber:65,columnNumber:19},this),k("path",{className:"kw-opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:L,lineNumber:66,columnNumber:19},this)]},void 0,!0,{fileName:L,lineNumber:64,columnNumber:17},this),k("div",{class:"kw-flex kw-justify-center kw-text-sm kw-text-gray-700 kw-text-center",children:"Por favor, aguarde. N\xE3o feche ou saia dessa p\xE1gina"},void 0,!1,{fileName:L,lineNumber:69,columnNumber:17},this)]},void 0,!0,{fileName:L,lineNumber:63,columnNumber:13},this)},void 0,!1,{fileName:L,lineNumber:62,columnNumber:34},this):"",k("div",{className:"kw-flex kw-items-center kw-justify-end kw-mb-4",children:k("svg",{onClick:s.onCancel,xmlns:"http://www.w3.org/2000/svg",class:"kw-h-6 kw-w-6 kw-cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2",children:k("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:L,lineNumber:77,columnNumber:15},this)},void 0,!1,{fileName:L,lineNumber:76,columnNumber:13},this)},void 0,!1,{fileName:L,lineNumber:74,columnNumber:11},this),k("div",{id:"kiwify-upsell-modal-pix",className:"kw-font-sans kw-flex kw-items-center kw-justify-center kw-flex-col",children:[u.view==="qr"?k("div",{children:[k("div",{class:"kw-text-2xl kw-font-bold kw-font-sans kw-text-center kw-text-[#38a169]",children:"Agora finalize o pagamento"},void 0,!1,{fileName:L,lineNumber:83,columnNumber:13},this),k("div",{class:"kw-block md:kw-hidden kw-text-black kw-text-left kw-mt-8",children:["1. Aperte em ",k("b",{children:'"Copiar C\xF3digo"'},void 0,!1,{fileName:L,lineNumber:85,columnNumber:28},this),".",k("br",{},void 0,!1,{fileName:L,lineNumber:85,columnNumber:51},this)," 2. Abra o app do seu banco e entre na op\xE7\xE3o Pix.",k("br",{},void 0,!1,{fileName:L,lineNumber:85,columnNumber:106},this)," 3. Escolha a op\xE7\xE3o ",k("b",{children:"Pagar / Pix copia e cola"},void 0,!1,{fileName:L,lineNumber:85,columnNumber:132},this),".",k("br",{},void 0,!1,{fileName:L,lineNumber:85,columnNumber:164},this)," 4. Depois, confirme o pagamento. ",k("br",{},void 0,!1,{fileName:L,lineNumber:85,columnNumber:204},this)]},void 0,!0,{fileName:L,lineNumber:84,columnNumber:13},this),k("div",{class:"kw-hidden md:kw-block kw-text-black kw-text-left kw-mt-8",children:["1. Abra o app do seu banco e entre na op\xE7\xE3o ",k("b",{children:"Pix"},void 0,!1,{fileName:L,lineNumber:88,columnNumber:59},this),".",k("br",{},void 0,!1,{fileName:L,lineNumber:88,columnNumber:70},this)," 2. Escolha a op\xE7\xE3o ",k("b",{children:"Pagar / Pix copia e cola"},void 0,!1,{fileName:L,lineNumber:88,columnNumber:96},this)," .",k("br",{},void 0,!1,{fileName:L,lineNumber:88,columnNumber:129},this)," 3. Escaneie o QR code. Se preferir, copie e cole o c\xF3digo.",k("br",{},void 0,!1,{fileName:L,lineNumber:88,columnNumber:194},this)," 4. Depois, confirme o pagamento. ",k("br",{},void 0,!1,{fileName:L,lineNumber:88,columnNumber:234},this)]},void 0,!0,{fileName:L,lineNumber:87,columnNumber:13},this),k("div",{class:"kw-text-center kw-font-sans kw-text-black kw-mt-2",children:"A aprova\xE7\xE3o leva no m\xE1ximo 2 minutos."},void 0,!1,{fileName:L,lineNumber:91,columnNumber:13},this),k("div",{className:"kw-flex kw-items-center kw-justify-center kw-mt-8",children:[k("div",{className:"kw-hidden md:kw-block",children:k("img",{src:s.pixResponse.qr},void 0,!1,{fileName:L,lineNumber:97,columnNumber:17},this)},void 0,!1,{fileName:L,lineNumber:96,columnNumber:15},this),u.showQRMobile?k("div",{className:"md:kw-hidden",children:k("img",{src:s.pixResponse.qr},void 0,!1,{fileName:L,lineNumber:101,columnNumber:17},this)},void 0,!1,{fileName:L,lineNumber:100,columnNumber:38},this):""]},void 0,!0,{fileName:L,lineNumber:95,columnNumber:13},this),k("div",{children:[k("div",{onClick:this.copyPixQR,className:"kw-flex kw-relative kw-items-center kw-justify-center kw-border kw-text-white kw-bg-gray-800 kw-font-sans kw-font-bold kw-cursor-pointer kw-p-3 kw-text-sm kw-rounded kw-text-center",children:u.pixCodeCopied?k("div",{className:"kw-flex kw-relative kw-text-green-500 kw-items-center kw-justify-between kw-w-full",children:[k("div",{},void 0,!1,{fileName:L,lineNumber:111,columnNumber:19},this),"C\xD3DIGO COPIADO",k("svg",{xmlns:"http://www.w3.org/2000/svg",style:"width: 20px;",className:"kw-text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2",children:k("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"},void 0,!1,{fileName:L,lineNumber:114,columnNumber:21},this)},void 0,!1,{fileName:L,lineNumber:113,columnNumber:19},this)]},void 0,!0,{fileName:L,lineNumber:110,columnNumber:26},this):k("div",{className:"kw-flex kw-relative kw-items-center kw-justify-center kw-w-full",children:[k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"kw-mr-1",style:"width: 20px;",children:[k("path",{d:"M9 2a2 2 0 00-2 2v8a2 2 0 002 2h6a2 2 0 002-2V6.414A2 2 0 0016.414 5L14 2.586A2 2 0 0012.586 2H9z"},void 0,!1,{fileName:L,lineNumber:108,columnNumber:140},this)," ",k("path",{d:"M3 8a2 2 0 012-2v10h8a2 2 0 01-2 2H5a2 2 0 01-2-2V8z"},void 0,!1,{fileName:L,lineNumber:108,columnNumber:256},this)]},void 0,!0,{fileName:L,lineNumber:108,columnNumber:19},this),"COPIAR C\xD3DIGO PIX"]},void 0,!0,{fileName:L,lineNumber:107,columnNumber:42},this)},void 0,!1,{fileName:L,lineNumber:106,columnNumber:15},this),k("div",{onClick:this.toggleQRMobile,className:"kw-flex md:kw-hidden kw-relative kw-bg-white kw-font-bold kw-font-sans kw-items-center kw-text-gray-700 kw-justify-center kw-border kw-border-gray-100 kw-cursor-pointer kw-p-3 kw-text-sm kw-rounded kw-text-center kw-mt-2",style:"border-color: rgb(210, 214, 220); border-style: solid;",children:[k("svg",{xmlns:"http://www.w3.org/2000/svg",className:"kw-mr-1",style:"width: 20px;",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2",children:k("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"},void 0,!1,{fileName:L,lineNumber:120,columnNumber:19},this)},void 0,!1,{fileName:L,lineNumber:119,columnNumber:17},this),u.showQRMobile?"ESCONDER O QR Code":"MOSTRAR O QR Code"]},void 0,!0,{fileName:L,lineNumber:118,columnNumber:15},this)]},void 0,!0,{fileName:L,lineNumber:105,columnNumber:13},this)]},void 0,!0,{fileName:L,lineNumber:82,columnNumber:11},this):k("div",{className:"kw-w-full kw-font-sans",children:[k("h3",{class:"kw-text-2xl kw-font-bold kw-text-center kw-text-[#ed8936]",children:"Pagamento em an\xE1lise!"},void 0,!1,{fileName:L,lineNumber:127,columnNumber:13},this),k("div",{class:"kw-bg-[#edf2f7] kw-p-4 kw-mt-4",children:[k("div",{class:"kw-text-lg kw-text-center",children:"Tempo restante para aprova\xE7\xE3o:"},void 0,!1,{fileName:L,lineNumber:129,columnNumber:15},this),k("div",{class:"kw-flex kw-justify-center kw-items-center",children:k("div",{class:"kw-border kw-border-solid kw-border-gray-100 kw-p-2 kw-w-full kw-text-xl kw-text-center kw-shadow-inner kw-font-bold kw-rounded-lg kw-bg-white",children:k("span",{children:u.time},void 0,!1,{fileName:L,lineNumber:134,columnNumber:19},this)},void 0,!1,{fileName:L,lineNumber:133,columnNumber:17},this)},void 0,!1,{fileName:L,lineNumber:132,columnNumber:15},this)]},void 0,!0,{fileName:L,lineNumber:128,columnNumber:13},this),k("div",{class:"kw-rounded kw-border kw-border-solid kw-border-gray-200 kw-m-4 kw-p-4 kw-py-6 kw-text-lg",children:[k("div",{class:"font-bold",children:"Estamos aguardando a confirma\xE7\xE3o do pagamento pelo banco. Isso pode levar 1-2 minutos."},void 0,!1,{fileName:L,lineNumber:140,columnNumber:15},this),k("div",{children:"Quando o pagamento for identificado, essa tela atualizar\xE1 automaticamente, e voc\xEA tamb\xE9m vai receber um email."},void 0,!1,{fileName:L,lineNumber:141,columnNumber:15},this)]},void 0,!0,{fileName:L,lineNumber:139,columnNumber:13},this),k("div",{class:"kw-text-center kw-text-lg kw-text-gray-700",children:"Ainda n\xE3o fez o pagamento?"},void 0,!1,{fileName:L,lineNumber:144,columnNumber:13},this)]},void 0,!0,{fileName:L,lineNumber:126,columnNumber:11},this),k("div",{className:"kw-w-full kw-mt-4",children:u.view==="qr"?k("div",{onClick:this.changeViewToHelp,className:"kw-flex kw-cursor-pointer kw-font-sans kw-underline hover:kw-no-underline kw-relative kw-uppercase kw-justify-center kw-w-full kw-text-[#2b6cb0] kw-font-bold kw-rounded kw-text-center",children:"J\xE1 paguei o Pix"},void 0,!1,{fileName:L,lineNumber:152,columnNumber:13},this):k("div",{onClick:this.changeViewToQR,className:"kw-flex kw-cursor-pointer kw-font-sans kw-underline hover:kw-no-underline kw-relative kw-uppercase kw-justify-center kw-w-full kw-text-[#2b6cb0] kw-font-bold kw-rounded kw-text-center",children:"Pague agora com Pix"},void 0,!1,{fileName:L,lineNumber:153,columnNumber:13},this)},void 0,!1,{fileName:L,lineNumber:150,columnNumber:9},this),k("div",{class:"kw-flex kw-text-xl kw-font-sans kw-w-full kw-font-bold kw-flex-row kw-p-4 kw-mt-4",style:"border-top:1px solid rgb(229,231,235)",children:[k("div",{class:"kw-flex-1",children:"TOTAL"},void 0,!1,{fileName:L,lineNumber:158,columnNumber:11},this),k("div",{class:"kw-flex-1 kw-text-right",children:this.props.formatCurrency(s.pixResponse.amount)},void 0,!1,{fileName:L,lineNumber:159,columnNumber:11},this)]},void 0,!0,{fileName:L,lineNumber:157,columnNumber:9},this)]},void 0,!0,{fileName:L,lineNumber:80,columnNumber:11},this)]},void 0,!0,{fileName:L,lineNumber:61,columnNumber:9},this)},void 0,!1,{fileName:L,lineNumber:60,columnNumber:7})}}var $="/Users/udi/kiwify/upsell/src/components/ModalUpsell.jsx";class ca extends Y{constructor(s){super();q(this,"onCharge",()=>{this.setState({isLoadingCharge:!0})});q(this,"renderForm",()=>{var l,a;const u=String(((a=(l=this.props.data)==null?void 0:l.settings)==null?void 0:a.currency)||"BRL").toUpperCase()!=="BRL";if(this.props.type==="credit-card")return k(ia,{translate:this.props.translate,formatCurrency:this.props.formatCurrency,isInternationalPayment:u,setupFeeEnabled:this.props.setupFeeEnabled,paymentVersion:this.props.paymentVersion,changeModalType:this.props.changeModalType,data:this.props.data,isLoadingCharge:this.state.isLoadingCharge},void 0,!1,{fileName:$,lineNumber:100,columnNumber:9});if(this.props.type==="payment-only")return k(ta,{translate:this.props.translate},void 0,!1,{fileName:$,lineNumber:113,columnNumber:9});if(this.props.type==="pix")return k(aa,{translate:this.props.translate,formatCurrency:this.props.formatCurrency,isInternationalPayment:u,paymentVersion:this.props.paymentVersion,data:this.props.data,changeModalType:this.props.changeModalType,onCancel:this.props.onCancel,pixResponse:this.props.pixResponse},void 0,!1,{fileName:$,lineNumber:119,columnNumber:9})});this.state={isLoadingCharge:!1}}componentWillMount(){this.props.type==="pix"&&(this.syncHeight(),window.addEventListener("resize",this.syncHeight),document.body.classList.add("is-locked"),setTimeout(()=>{document.getElementById("kiwify-upsell-modal")&&document.getElementById("kiwify-upsell-modal").addEventListener("pointermove",this.preventDefault)},1e3))}render(s,u){return k(le,{children:k("div",{className:`kw-fixed kw-z-[1000000] kw-inset-0 ${s.type==="pix"?"md:kw-mt-0":""}`,id:"kiwify-upsell-modal",children:k("div",{className:`kw-flex kw-items-center kw-justify-center kw-min-h-screen kw-text-center sm:kw-block sm:kw-p-0 ${s.type==="pix"?"":"kw-pt-4 kw-px-4 kw-pb-20"}`,children:[k("div",{className:"kw-fixed kw-inset-0 kw-transition-opacity",children:k("div",{className:"kw-absolute kw-inset-0 kw-bg-gray-500 kw-opacity-75"},void 0,!1,{fileName:$,lineNumber:39,columnNumber:15},this)},void 0,!1,{fileName:$,lineNumber:36,columnNumber:13},this),k("span",{className:"kw-hidden sm:kw-inline-block sm:kw-align-middle sm:kw-h-screen","aria-hidden":"true",children:"\u200B"},void 0,!1,{fileName:$,lineNumber:43,columnNumber:13},this),k("div",{className:`kw-inline-block kw-bg-white kw-overflow-hidden kw-relative kw-rounded-lg kw-text-left kw-shadow-xl kw-transform kw-transition-all kw-align-middle kw-w-full ${s.type==="pix"?"sm:kw-max-w-[600px] kw-p-6 md:kw-mt-0 kw-form-container-kiwi-pix kw-overflow-y-auto":(s.setupFeeEnabled,"kw-max-w-[400px]")}`,id:"kiwify-upsell-modal-content",children:[k("div",{className:`bg-white ${s.type==="pix"?"":"kw-p-6"}`,children:k("div",{children:this.renderForm()},void 0,!1,{fileName:$,lineNumber:56,columnNumber:17},this)},void 0,!1,{fileName:$,lineNumber:55,columnNumber:15},this),s.type==="credit-card"?k("div",{style:"background-color: rgba(249,250,251,1)",className:"kw-py-3 kw-px-6 kw-flex kw-justify-center kw-flex-row-reverse",children:[k("button",{onClick:this.onCharge,disabled:u.isLoadingCharge,id:"kiwify-upsell-modal-charge",type:"button",className:`kw-inline-flex kw-font-sans kw-items-center kw-justify-center kw-rounded-md kw-border kw-border-transparent kw-shadow-sm kw-px-4 kw-py-2 kw-bg-indigo-600 kw-font-medium kw-text-white hover:kw-bg-indigo-700 kw-cursor-pointer focus:kw-outline-none kw-ml-3 kw-text-sm ${u.isLoadingCharge?"kw-opacity-50":""}`,style:`border-color: #d2d6dc; border-style:solid;background-color:${s.data.checkout_color?s.data.checkout_color:"rgba(88,80,236,1)"};color:${Gs(s.data.checkout_color?s.data.checkout_color:"#000",!0)};`,children:[u.isLoadingCharge?k("svg",{id:"kiwify-upsell-modal-charge-loading",className:"kw-animate-spin -kw-ml-1 kw-mr-3 kw-h-5  kw-text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[k("circle",{className:"kw-opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},void 0,!1,{fileName:$,lineNumber:69,columnNumber:23},this),k("path",{className:"kw-opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:$,lineNumber:70,columnNumber:23},this)]},void 0,!0,{fileName:$,lineNumber:68,columnNumber:47},this):"",s.translate("confirmButton")]},void 0,!0,{fileName:$,lineNumber:67,columnNumber:19},this),k("button",{onClick:s.onCancel,disabled:s.isLoadingCancel,className:`kw-inline-flex kw-font-sans kw-items-center kw-cursor-pointer kw-justify-center kw-rounded-md kw-border kw-border-gray-100 kw-shadow kw-px-4 kw-py-2 kw-bg-white  kw-font-medium kw-text-gray-700 focus:kw-outline-none kw-mt-0 kw-ml-3 kw-w-auto kw-text-sm ${s.isLoadingCancel?"kw-opacity-50":""}`,id:"kiwify-upsell-modal-cancel",type:"button",style:"border-color: #d2d6dc; border-style:solid;",children:[s.isLoadingCancel?k("svg",{id:"kiwify-upsell-modal-cancel-loading",className:"kw-animate-spin -kw-ml-1 kw-mr-3 kw-h-5  kw-text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[k("circle",{className:"kw-opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},void 0,!1,{fileName:$,lineNumber:76,columnNumber:25},this),k("path",{className:"kw-opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:$,lineNumber:77,columnNumber:25},this)]},void 0,!0,{fileName:$,lineNumber:75,columnNumber:47},this):"",s.translate("cancelButton")]},void 0,!0,{fileName:$,lineNumber:74,columnNumber:19},this)]},void 0,!0,{fileName:$,lineNumber:66,columnNumber:17},this):""]},void 0,!0,{fileName:$,lineNumber:51,columnNumber:13},this)]},void 0,!0,{fileName:$,lineNumber:34,columnNumber:11},this)},void 0,!1,{fileName:$,lineNumber:30,columnNumber:9},this)},void 0,!1)}preventDefault(s){s.preventDefault()}syncHeight(){document.body.style.setProperty("--window-inner-height",`${window.innerHeight}px`),document.body.style.setProperty("--window-vh",`${window.innerHeight*.01}px`),console.log(window.innerHeight)}}var ua={credit_card:{title:"Additional payment",subtitle:"You'll be charged on your credit card"},confirmButton:"Confirm",cancelButton:"Cancel",payment_only:{title:"Thank you!",subtitle:"Check your email for instructions on how to access the digital product and your payment receipt."},subscriptionFrequency:{annually:"the first year","semi-annually":"the first semester",quarterly:"the first quarter",bimonthly:"the first two-month period",monthly:"the first month",weekly:"the first week"},dictionary:{for:"for",renewsAfter:"Next renewal for"}},la={credit_card:{title:"Pagamento adicional",subtitle:"Voc\xEA ser\xE1 cobrado no cart\xE3o de cr\xE9dito"},confirmButton:"Confirmar",cancelButton:"Cancelar",payment_only:{title:"Muito obrigado!",subtitle:"Verifique o seu e-mail para ver instru\xE7\xF5es de acesso ao produto digital, e o recibo de pagamento."},subscriptionFrequency:{annually:"o primeiro ano","semi-annually":"o primeiro semestre",quarterly:"o primeiro trimestre",bimonthly:"o primeiro bimestre",monthly:"o primeiro m\xEAs",weekly:"a primeira semana"},dictionary:{for:"para",renewsAfter:"Depois renova por"}},fa={en:ua,pt:la},G="/Users/udi/kiwify/upsell/src/app.jsx";class ha extends Y{constructor(){super();q(this,"translate",(s,u={})=>{var p;const l=(p=this.state.data)!=null&&p.is_saas?"en":"pt";let f=s.split(".").reduce((d,C)=>d&&d[C]?d[C]:null,fa[l]);return f&&Object.keys(u).forEach(d=>{f=f.replace(new RegExp(`{${d}}`,"g"),u[d])}),f||s});q(this,"formatCurrency",s=>{var f,p,d;const u=Number(s),l=(f=this.state.data)!=null&&f.is_saas?"en-US":"pt-BR",a={currency:((d=(p=this.state.data)==null?void 0:p.settings)==null?void 0:d.currency)||"BRL",style:"currency"};return(u/100).toLocaleString(l,a)});q(this,"setupCancelButton",()=>{let s=this;const u=document.querySelectorAll("[id^=kiwify-upsell-cancel-trigger]");if(u.length)for(let l=0;l<u.length;l++)u[l].onclick=s.onCancel});q(this,"setupUpsellButton",()=>{let s=null,u=this;const l=document.querySelectorAll("[id^=kiwify-upsell-trigger]");if(l.length)for(let a=0;a<l.length;a++)s=l[a].id.replace("kiwify-upsell-trigger-",""),l[a].onclick=function(){u.fetchInitialData(s)};this.setState({linkId:s})});q(this,"onCancel",()=>{if(nextDownsellURL){let s=It(this.state.redirect,this.state.tokenParam,this.state.order_amount,this.state.modalContentType==="pix",this.state.payment_version);te(nextDownsellURL,s)}else this.state.redirect!=="undefined"&&this.state.redirect?te(`https://dashboard.kiwify.com.br/student/password/${this.state.redirect}`):(this.setState({showModal:!0}),this.setState({modalContentType:"payment-only"}));this.setState({isLoadingCancel:!0})});q(this,"fetchInitialData",async()=>{try{let s=this;if(this.setState({data:{tokenParam:this.state.tokenParam,redirect:this.state.redirect,order_amount:this.state.order_amount,linkId:this.state.linkId}}),this.setState({isLoadingModal:!0}),this.state.modalContentType==="pix")setTimeout(async()=>{const l=await(await fetch(`https://checkout-api.kiwify.com.br/link/${s.state.linkId}?upsell=yes`)).json();l.subscription&&l.subscription.setup_fee_enabled&&this.setState({setupFeeEnabled:!0}),s.setupPix()},1e3);else{const l=await(await fetch(`https://checkout-api.kiwify.com.br/link/${this.state.linkId}?upsell=yes`)).json();this.setState({data:$e($e({},l),this.state.data)}),l.subscription&&l.subscription.setup_fee_enabled&&this.setState({setupFeeEnabled:!0}),this.setState({isLoadingModal:!1}),this.setState({showModal:!0})}}catch(s){console.log(s)}});q(this,"changeModalType",s=>{s==="payment-only"&&this.setState({modalContentType:"payment-only"})});q(this,"setupPix",async()=>{try{let s="/generate-pix/upsell",u={token:this.state.data.tokenParam,link:this.state.data.linkId};(this.state.payment_version&&this.state.payment_version=="kiwipay"||this.state.setupFeeEnabled)&&(s="/v2/charge/upsell",u.paymentMethod="pix");const a=await(await fetch(`https://checkout-api.kiwify.com.br${s}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(u)})).json();if(a.error!=="USED_TOKEN"){const f=await Be.toDataURL(a.pix_qrcode);this.setState({pixResponse:dn($e({},a),{qr:f})}),this.setState({isLoadingModal:!1}),this.setState({showModal:!0})}else this.state.data.redirect!=="undefined"&&this.state.data.redirect?te(`https://dashboard.kiwify.com.br/student/password/${this.state.data.redirect}`):(this.changeModalType("payment-only"),this.setState({showModal:!0}))}catch{this.state.data.redirect!=="undefined"&&this.state.data.redirect?te(`https://dashboard.kiwify.com.br/student/password/${this.state.data.redirect}`):(this.changeModalType("payment-only"),this.setState({showModal:!0}))}});this.state={data:null,isLoadingCancel:!1,isLoadingModal:!1,modalContentType:_e("pix_upsell")?"pix":"credit-card",showModal:!1,tokenParam:_e("token"),redirect:_e("code_senha"),order_amount:_e("amount"),payment_version:_e("payment_version")?_e("payment_version"):"pagarme",pixResponse:{},linkId:null,setupFeeEnabled:!1}}componentWillMount(){this.setupCancelButton(),this.setupUpsellButton()}render(s,u){return k("div",{children:[u.isLoadingModal?k("div",{children:k("div",{className:"kw-fixed kw-z-[1000000] kw-inset-0 kw-overflow-y-auto",id:"kiwify-upsell-loading",children:k("div",{className:"kw-flex kw-items-end kw-justify-center kw-min-h-screen kw-pt-4 kw-px-4 kw-pb-20 kw-text-center kw-sm:block kw-sm:p-0",children:k("div",{className:"kw-fixed kw-inset-0 kw-transition-opacity","aria-hidden":"true",children:k("div",{className:"kw-absolute kw-inset-0 kw-bg-gray-500 kw-w-full kw-opacity-75",children:k("div",{className:"kw-min-h-screen kw-flex kw-justify-center kw-flex-col kw-mx-auto kw-p-10",children:k("svg",{className:"kw-animate-spin -kw-ml-1 kw-mr-3 kw-h-20  kw-text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[k("circle",{className:"kw-opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},void 0,!1,{fileName:G,lineNumber:40,columnNumber:23},this),k("path",{className:"kw-opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:G,lineNumber:41,columnNumber:23},this)]},void 0,!0,{fileName:G,lineNumber:39,columnNumber:21},this)},void 0,!1,{fileName:G,lineNumber:38,columnNumber:19},this)},void 0,!1,{fileName:G,lineNumber:37,columnNumber:17},this)},void 0,!1,{fileName:G,lineNumber:36,columnNumber:15},this)},void 0,!1,{fileName:G,lineNumber:35,columnNumber:13},this)},void 0,!1,{fileName:G,lineNumber:34,columnNumber:11},this)},void 0,!1,{fileName:G,lineNumber:33,columnNumber:34},this):"",u.showModal?k("div",{children:k(ca,{translate:this.translate,setupFeeEnabled:u.setupFeeEnabled,paymentVersion:u.payment_version,changeModalType:this.changeModalType,data:u.data,pixResponse:u.pixResponse,linkId:u.linkId,token:u.tokenParam,type:u.modalContentType,isLoadingCancel:u.isLoadingCancel,onCancel:this.onCancel,formatCurrency:this.formatCurrency},void 0,!1,{fileName:G,lineNumber:50,columnNumber:11},this)},void 0,!1,{fileName:G,lineNumber:49,columnNumber:29},this):""]},void 0,!0,{fileName:G,lineNumber:32,columnNumber:7})}}var da="/Users/udi/kiwify/upsell/src/main.jsx";if(!document.getElementById("kiwify-upsell-container")){const i=document.createElement("div");i.id="kiwify-upsell-container",i.className="kw-z-[1000000]",document.body.appendChild(i)}os(k(ha,{},void 0,!1,{fileName:da,lineNumber:12,columnNumber:8}),document.getElementById("kiwify-upsell-container"));
